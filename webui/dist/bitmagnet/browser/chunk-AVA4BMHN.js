import{c as R,e as U,f as $}from"./chunk-EF5HJP6V.js";import"./chunk-3RUUGSNJ.js";import"./chunk-JIO2QO4M.js";import"./chunk-33KK2FKQ.js";import"./chunk-TC5EWLZ6.js";import{E as O,J as I,P as S,Q as w,R as E,S as A,U as F,Ua as L,V as z,b as P,i as b,qa as D,va as H,ya as q}from"./chunk-HB55W55I.js";import"./chunk-6XXA7HXI.js";import{j as k,l as y}from"./chunk-ZBBMS7J5.js";import{$b as s,Cb as d,Hb as c,Mb as _,Qb as i,Rb as a,Sb as m,Tb as x,Ub as M,cc as v,hb as h,kb as r,kc as f,lc as C,pc as T,qa as l,ua as g}from"./chunk-FJILXII2.js";function j(e,u){e&1&&m(0,"mat-progress-bar",1)}function B(e,u){if(e&1&&(i(0,"mat-card",2)(1,"mat-card-header")(2,"mat-icon",3),f(3),a(),i(4,"mat-card-title")(5,"h2"),f(6),a(),i(7,"a",4),m(8,"mat-icon",5),a()(),i(9,"mat-card-subtitle"),m(10,"app-torrent-chips",6),a()(),i(11,"mat-card-content"),m(12,"app-torrent-content",7),a()()),e&2){let o,t,p=s().$implicit,n=s();r(2),c("matTooltip",p("content_types.singular."+((o=n.torrentContent.contentType)!==null&&o!==void 0?o:"null"))),r(),C((t=(t=n.contentTypeInfo(n.torrentContent.contentType))==null?null:t.icon)!==null&&t!==void 0?t:"question_mark"),r(3),C(n.torrentContent.torrent.name),r(),v("href",n.torrentContent.torrent.magnetUri,h),r(3),c("torrentContent",n.torrentContent),r(2),c("torrentContent",n.torrentContent)("heading",!1)}}function G(e,u){if(e&1&&(x(0),d(1,j,1,0,"mat-progress-bar",1)(2,B,13,7,"mat-card",2),M()),e&2){let o=s();r(),_(o.loading?1:2)}}var mt=(()=>{class e{constructor(){this.route=l(k),this.router=l(y),this.apollo=l(b),this.loading=!0,this.contentTypeInfo=R}ngOnInit(){this.loading=!0,this.route.paramMap.subscribe(o=>{let t=o.get("infoHash");if(typeof t!="string"||!/^[0-9a-f]{40}$/.test(t))return this.notFound();this.apollo.query({query:O,variables:{input:{infoHashes:[t]}},fetchPolicy:"no-cache"}).subscribe(p=>{let n=p.data.torrentContent.search.items;if(n.length===0)return this.notFound();this.torrentContent=n[0],this.loading=!1})})}notFound(){this.router.navigate(["/not-found"],{skipLocationChange:!0})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=g({type:e,selectors:[["app-torrent-permalink"]],standalone:!0,features:[T],decls:1,vars:0,consts:[[4,"transloco"],["mode","indeterminate"],[1,"torrent-permalink"],["matCardAvatar","",3,"matTooltip"],[1,"magnet-link",3,"href"],["svgIcon","magnet"],[3,"torrentContent"],[3,"torrentContent","heading"]],template:function(t,p){t&1&&d(0,G,3,1,"ng-container",0)},dependencies:[L,S,z,E,F,A,w,D,H,q,P,I,$,U],styles:[".torrent-permalink[_ngcontent-%COMP%]{max-width:900px;margin:20px auto}.torrent-permalink[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;word-break:break-word;overflow-wrap:break-word;padding-right:80px}.torrent-permalink[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .magnet-link[_ngcontent-%COMP%]{position:absolute;right:20px;top:20px}.torrent-permalink[_ngcontent-%COMP%]   .mat-mdc-card-avatar[_ngcontent-%COMP%]{font-size:44px;margin-top:-10px;border-radius:0;overflow:visible}.torrent-permalink[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin:16px 0 14px -56px;font-size:6px}"]})}}return e})();export{mt as TorrentPermalinkComponent};
