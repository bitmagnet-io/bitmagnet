import{a as ge,b as Te}from"./chunk-3RUUGSNJ.js";import{a as W}from"./chunk-33KK2FKQ.js";import{a as he}from"./chunk-TC5EWLZ6.js";import{$ as te,Da as oe,Ea as re,F as jt,Fa as ae,Ga as le,Ha as se,I as Lt,Ia as ce,Ja as pe,K as Vt,Ka as me,La as _e,M as Ht,Ma as de,N as Gt,Na as ue,O as Yt,Oa as Ce,P as Kt,Pa as xe,Qa as fe,R as qt,T as Ut,Ua as L,W as Xt,X as Jt,Y as Zt,Z as Qt,_ as Wt,a as R,aa as ee,b as j,d as zt,e as Bt,f as Ft,g as Ot,i as Dt,ja as ne,n as Nt,o as Rt,qa as tt,va as ie,ya as et}from"./chunk-HB55W55I.js";import{m as At}from"./chunk-ZBBMS7J5.js";import{$b as c,$c as kt,B as st,Cb as C,Ea as M,Fa as $,Hb as g,Mb as d,N as Y,Na as wt,Nb as K,Ob as k,Pb as P,Q as St,Qb as s,Rb as r,Sb as h,Tb as T,Ub as b,Wb as B,Zb as A,a as X,ad as Q,b as vt,ha as J,hb as It,id as Pt,jc as pt,kb as o,kc as l,l as E,lb as ct,lc as x,mc as m,nc as yt,o as G,pc as N,qa as y,rc as Mt,sc as $t,ua as D,uc as v,vc as w,wc as Z,xa as Et}from"./chunk-FJILXII2.js";var be={movie:{singular:"Movie",plural:"Movies",icon:"movie"},tv_show:{singular:"TV Show",plural:"TV Shows",icon:"live_tv"},music:{singular:"Music",plural:"Music",icon:"music_note"},ebook:{singular:"E-Book",plural:"E-Books",icon:"auto_stories"},comic:{singular:"Comic",plural:"Comics",icon:"comic_bubble"},audiobook:{singular:"Audiobook",plural:"Audiobooks",icon:"mic"},software:{singular:"Software",plural:"Software",icon:"desktop_windows"},game:{singular:"Game",plural:"Games",icon:"sports_esports"},xxx:{singular:"XXX",plural:"XXX",icon:"18_up_rating"},null:{singular:"Unknown",plural:"Unknown",icon:"question_mark"}},_i=Object.entries(be).map(([t,n])=>X({key:t},n)),di=t=>t?be[t]:void 0;var Ne=(t,n)=>n.id;function Re(t,n){if(t&1&&(s(0,"mat-chip",1)(1,"mat-icon",2),l(2,"sell"),r(),l(3),r()),t&2){let e=n.$implicit;o(3),m(" ",e," ")}}function je(t,n){if(t&1&&l(0),t&2){let e=n.$implicit,i=n.$index,a=c(),p=c().$implicit;m(" ",p("languages."+e.id)+(i<a.length-1?", ":"")," ")}}function Le(t,n){t&1&&(s(0,"mat-chip")(1,"mat-icon",2),l(2,"translate"),r(),k(3,je,1,1,null,null,Ne),r()),t&2&&(o(3),P(n))}function Ve(t,n){t&1&&(s(0,"mat-chip"),l(1),r()),t&2&&(o(),x(n))}function He(t,n){t&1&&(s(0,"mat-chip")(1,"mat-icon",2),l(2,"aspect_ratio"),r(),l(3),r()),t&2&&(o(3),x(n))}function Ge(t,n){t&1&&(s(0,"mat-chip")(1,"mat-icon",2),l(2,"album"),r(),l(3),r()),t&2&&(o(3),x(n))}function Ye(t,n){t&1&&(s(0,"mat-chip"),h(1,"mat-icon",3),l(2),r()),t&2&&(o(2),x(n))}function Ke(t,n){t&1&&(s(0,"mat-chip"),l(1),r()),t&2&&(o(),x(n))}function qe(t,n){if(t&1&&(T(0),s(1,"mat-chip-set"),k(2,Re,4,1,"mat-chip",1,K),C(4,Le,5,0,"mat-chip")(5,Ve,2,1,"mat-chip")(6,He,4,1,"mat-chip")(7,Ge,4,1,"mat-chip")(8,Ye,3,1,"mat-chip")(9,Ke,2,1,"mat-chip"),r(),b()),t&2){let e,i,a,p,_,F,S=c();o(2),P(S.torrentContent.torrent.tagNames),o(2),d((e=S.torrentContent.languages)?4:-1,e),o(),d((i=S.torrentContent.video3d==null?null:S.torrentContent.video3d.slice(1))?5:-1,i),o(),d((a=S.torrentContent.videoResolution==null?null:S.torrentContent.videoResolution.slice(1))?6:-1,a),o(),d((p=S.torrentContent.videoSource)?7:-1,p),o(),d((_=S.torrentContent.videoCodec)?8:-1,_),o(),d((F=S.torrentContent.videoModifier)?9:-1,F)}}var fi=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-torrent-chips"]],inputs:{torrentContent:"torrentContent"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[1,"chip-primary"],["matChipAvatar",""],["matChipAvatar","","svgIcon","binary"]],template:function(i,a){i&1&&C(0,qe,10,6,"ng-container",0)},dependencies:[L,Zt,Xt,Wt,tt,j],styles:["mat-chip-set[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;left:4px}"]})}}return t})();var Ue="array",Xe="bit",Se="bits",Je="byte",Ee="bytes",V="",Ze="exponent",Qe="function",we="iec",We="Invalid number",tn="Invalid rounding method",_t="jedec",en="object",Ie=".",nn="round",on="s",rn="si",an="kbit",ln="kB",sn=" ",cn="string",pn="0",dt={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function ye(t,{bits:n=!1,pad:e=!1,base:i=-1,round:a=2,locale:p=V,localeOptions:_={},separator:F=V,spacer:S=sn,symbols:Pe={},standard:I=V,output:at=cn,fullform:Ae=!1,fullforms:ut=[],exponent:Ct=-1,roundingMethod:ze=nn,precision:q=0}={}){let f=Ct,O=Number(t),u=[],z=0,lt=V;I===rn?(i=10,I=_t):I===we||I===_t?i=2:i===2?I=we:(i=10,I=_t);let U=i===10?1e3:1024,Be=Ae===!0,xt=O<0,ft=Math[ze];if(typeof t!="bigint"&&isNaN(t))throw new TypeError(We);if(typeof ft!==Qe)throw new TypeError(tn);if(xt&&(O=-O),(f===-1||isNaN(f))&&(f=Math.floor(Math.log(O)/Math.log(U)),f<0&&(f=0)),f>8&&(q>0&&(q+=8-f),f=8),at===Ze)return f;if(O===0)u[0]=0,lt=u[1]=dt.symbol[I][n?Se:Ee][f];else{z=O/(i===2?Math.pow(2,f*10):Math.pow(1e3,f)),n&&(z=z*8,z>=U&&f<8&&(z=z/U,f++));let H=Math.pow(10,f>0?a:0);u[0]=ft(z*H)/H,u[0]===U&&f<8&&Ct===-1&&(u[0]=1,f++),lt=u[1]=i===10&&f===1?n?an:ln:dt.symbol[I][n?Se:Ee][f]}if(xt&&(u[0]=-u[0]),q>0&&(u[0]=u[0].toPrecision(q)),u[1]=Pe[u[1]]||u[1],p===!0?u[0]=u[0].toLocaleString():p.length>0?u[0]=u[0].toLocaleString(p,_):F.length>0&&(u[0]=u[0].toString().replace(Ie,F)),e&&a>0){let H=u[0].toString(),gt=F||(H.match(/(\D)/g)||[]).pop()||Ie,ht=H.toString().split(gt),Tt=ht[1]||V,bt=Tt.length,Fe=a-bt;u[0]=`${ht[0]}${gt}${Tt.padEnd(bt+Fe,pn)}`}return Be&&(u[1]=ut[f]?ut[f]:dt.fullform[I][f]+(n?Xe:Je)+(u[0]===1?V:on)),at===Ue?u:at===en?{value:u[0],symbol:u[1],exponent:f,unit:lt}:u.join(S)}var nt=(()=>{class t{constructor(){this.transloco=y(R)}transform(e,i=2){return ye(e,{locale:this.transloco.getActiveLang(),base:i})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=Et({name:"filesize",type:t,pure:!1,standalone:!0})}}return t})();var mn=t=>t.toLowerCase().replaceAll(/[^a-z0-9\-]/g,"-").replace(/^-+/,"").replaceAll(/-+/g,"-"),Me=mn;var _n={items:[],hasNextPage:!1,totalCount:0,aggregations:{queue:[],status:[]}},it=class{constructor(n,e,i){this.apollo=n,this.errorsService=e,this.currentRequest=new E(0),this.loadingSubject=new E(!1),this.loading$=this.loadingSubject.asObservable(),this.result=_n,this.resultSubject=new E(this.result),this.result$=this.resultSubject.asObservable(),this.items$=this.resultSubject.pipe(st(a=>a.items)),i.subscribe(a=>{this.loadResult(a)}),this.resultSubject.subscribe(a=>{this.result=a})}connect({}){return this.items$}disconnect(){this.resultSubject.complete()}loadResult(n){this.currentSubscription&&(this.currentSubscription.unsubscribe(),this.currentSubscription=void 0),this.loadingSubject.next(!0);let e=this.currentRequest.getValue()+1;this.currentRequest.next(e);let i=this.apollo.query({query:jt,variables:n,fetchPolicy:"no-cache"}).pipe(st(a=>a.data.torrent.files)).pipe(Y(a=>(this.errorsService.addError(`Error loading item results: ${a.message}`),G)));this.currentSubscription=i.subscribe(a=>{e===this.currentRequest.getValue()&&(this.loadingSubject.next(!1),this.resultSubject.next(a))})}},ot=class{constructor(n){this.torrent=n,this.loading$=new E(!1).asObservable(),this.file={infoHash:n.infoHash,index:0,path:n.name,size:n.size,fileType:n.fileType,extension:n.extension,createdAt:n.createdAt,updatedAt:n.updatedAt},this.result={hasNextPage:!1,items:[this.file],totalCount:1},this.result$=new E(this.result).asObservable(),this.items$=new E([this.file]).asObservable()}connect({}){return this.items$}disconnect(){}};var rt=class{constructor(n){let e={infoHash:n,limit:10,page:1};this.controlsSubject=new E(e),this.controls$=this.controlsSubject.asObservable(),this.controls$.pipe(St(100)).subscribe(i=>{let a=this.variablesSubject.getValue(),p=$e(i);JSON.stringify(a)!==JSON.stringify(p)&&this.variablesSubject.next(p)}),this.variablesSubject=new E($e(e)),this.variables$=this.variablesSubject.asObservable()}update(n){let e=this.controlsSubject.getValue(),i=n(e);JSON.stringify(e)!==JSON.stringify(i)&&this.controlsSubject.next(i)}handlePageEvent(n){this.update(e=>vt(X({},e),{limit:n.pageSize,page:n.page}))}},$e=t=>({input:{infoHashes:[t.infoHash],limit:t.limit,page:t.page,totalCount:!0,hasNextPage:!1}});var Cn=(t,n)=>({x:t,y:n});function xn(t,n){if(t&1&&(s(0,"p"),l(1),v(2,"number"),v(3,"number"),r()),t&2){let e=c().$implicit,i=c();o(),m(" ",e("torrents.showing_x_of_y_files",$t(5,Cn,w(2,1,i.dataSource.result.totalCount),i.torrent.filesCount==null?"?":w(3,3,i.torrent.filesCount)))," ")}}function fn(t,n){if(t&1&&(s(0,"th",13),l(1),r()),t&2){let e=c().$implicit;o(),x(e("torrents.file_index"))}}function gn(t,n){if(t&1&&(s(0,"td",14),l(1),r()),t&2){let e=n.$implicit,i=c(2);o(),m(" ",i.item(e).index," ")}}function hn(t,n){if(t&1&&(s(0,"th",13),l(1),r()),t&2){let e=c().$implicit;o(),x(e("torrents.file_path"))}}function Tn(t,n){if(t&1&&(s(0,"td",14),l(1),r()),t&2){let e=n.$implicit,i=c(2);o(),m(" ",i.item(e).path," ")}}function bn(t,n){if(t&1&&(s(0,"th",13),l(1),r()),t&2){let e=c().$implicit;o(),x(e("torrents.file_type"))}}function vn(t,n){if(t&1&&(s(0,"td",14),l(1),r()),t&2){let e,i=n.$implicit,a=c().$implicit,p=c();o(),m(" ",a("file_types."+((e=p.item(i).fileType)!==null&&e!==void 0?e:"unknown"))," ")}}function Sn(t,n){if(t&1&&(s(0,"th",13),l(1),r()),t&2){let e=c().$implicit;o(),x(e("torrents.file_size"))}}function En(t,n){if(t&1&&(s(0,"td",14)(1,"span",15),v(2,"filesize"),l(3),v(4,"filesize"),r()()),t&2){let e=n.$implicit,i=c(2);o(),g("matTooltip",Z(2,2,i.item(e).size,10)),o(2),x(w(4,5,i.item(e).size))}}function wn(t,n){t&1&&h(0,"tr",16)}function In(t,n){t&1&&h(0,"tr",17)}function yn(t,n){if(t&1){let e=B();s(0,"app-paginator",18),A("paging",function(a){M(e);let p=c(2);return $(p.controller.handlePageEvent(a))}),r()}if(t&2){let e=c(2);g("page",e.controls.page)("pageSize",e.controls.limit)("pageLength",e.dataSource.result.items.length)("totalLength",e.dataSource.result.totalCount)("totalIsEstimate",!1)("showLastPage",!0)}}function Mn(t,n){if(t&1&&(T(0),s(1,"div",1),h(2,"mat-progress-bar",2),v(3,"async"),r(),C(4,xn,4,8,"p"),s(5,"table",3),T(6,4),C(7,fn,2,1,"th",5)(8,gn,2,1,"td",6),b(),T(9,7),C(10,hn,2,1,"th",5)(11,Tn,2,1,"td",6),b(),T(12,8),C(13,bn,2,1,"th",5)(14,vn,2,1,"td",6),b(),T(15,9),C(16,Sn,2,1,"th",5)(17,En,5,7,"td",6),b(),C(18,wn,1,0,"tr",10)(19,In,1,0,"tr",11),r(),C(20,yn,1,6,"app-paginator",12),b()),t&2){let e=c();o(2),g("mode",w(3,8,e.dataSource.loading$)?"indeterminate":"determinate")("value",0),o(2),d(e.torrent.filesStatus==="over_threshold"?4:-1),o(),g("dataSource",e.dataSource)("multiTemplateDataRows",!0),o(13),g("matHeaderRowDef",e.displayedColumns),o(),g("matRowDefColumns",e.displayedColumns),o(),d(e.dataSource.result.totalCount>10?20:-1)}}var ke=(()=>{class t{constructor(){this.apollo=y(Dt),this.errorsService=y(W),this.transloco=y(R),this.displayedColumns=["index","path","type","size"]}ngOnInit(){this.controller=new rt(this.torrent.infoHash),this.dataSource=this.torrent.filesStatus==="single"?new ot(this.torrent):new it(this.apollo,this.errorsService,this.controller.variables$),this.controller.controls$.subscribe(e=>{this.controls=e})}item(e){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-torrent-files-table"]],inputs:{torrent:"torrent"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[1,"progress-bar-container"],[3,"mode","value"],["mat-table","",1,"table-results",3,"dataSource","multiTemplateDataRows"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","path"],["matColumnDef","type"],["matColumnDef","size"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","pageSize","pageLength","totalLength","totalIsEstimate","showLastPage"],["mat-header-cell",""],["mat-cell",""],[1,"filesize",3,"matTooltip"],["mat-header-row",""],["mat-row",""],[3,"paging","page","pageSize","pageLength","totalLength","totalIsEstimate","showLastPage"]],template:function(i,a){i&1&&C(0,Mn,21,10,"ng-container",0)},dependencies:[L,ie,oe,ae,pe,le,re,me,se,ce,_e,de,et,j,kt,Q,nt,ge],styles:["span.filesize[_ngcontent-%COMP%]{text-decoration:underline;text-decoration-style:dotted}"]})}}return t})();var $n=(t,n)=>n.key,kn=(t,n)=>n.id,Pn=(t,n)=>n.metadataSource.key,An=t=>({count:t});function zn(t,n){if(t&1&&h(0,"img",3),t&2){let e=c().$implicit,i=c();g("ngSrc","https://image.tmdb.org/t/p/w300/"+n)("alt",e("torrents.poster"))("width",i.breakpoints.sizeAtLeast("Medium")?300:150)("height",i.breakpoints.sizeAtLeast("Medium")?450:225)}}function Bn(t,n){if(t&1&&(s(0,"h2")(1,"a",14),l(2),r()()),t&2){let e=c().$implicit,i=c();o(),g("routerLink","permalink/"+i.torrentContent.infoHash)("matTooltip",e("torrents.permalink")),o(),x(i.torrentContent.torrent.name)}}function Fn(t,n){if(t&1&&(s(0,"p",4)(1,"strong"),l(2),r(),l(3,"\xA0 "),s(4,"span",15),v(5,"filesize"),l(6),v(7,"filesize"),r()()),t&2){let e=c().$implicit,i=c();o(2),m("",e("torrents.size"),":"),o(2),g("matTooltip",Z(5,3,i.torrentContent.torrent.size,10)),o(2),x(w(7,6,i.torrentContent.torrent.size))}}function On(t,n){if(t&1&&(s(0,"p",5)(1,"strong"),l(2),r(),l(3),v(4,"timeAgo"),r()),t&2){let e=c().$implicit,i=c();o(2),x(e("torrents.published")),o(),m(" ",w(4,2,i.torrentContent.publishedAt)," ")}}function Dn(t,n){if(t&1&&(s(0,"p",6)(1,"strong"),l(2),r(),l(3),r()),t&2){let e,i=c().$implicit,a=c();o(2),m("",i("torrents.s_l"),":"),o(),yt(" ",(e=a.torrentContent.seeders)!==null&&e!==void 0?e:"?"," / ",(e=a.torrentContent.leechers)!==null&&e!==void 0?e:"?"," ")}}function Nn(t,n){if(t&1&&(s(0,"span"),l(1),r()),t&2){let e=n.$implicit,i=n.$index;o(),x((i>0?", ":"")+e.name)}}function Rn(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3),r()),t&2){let e=c().$implicit,i=c();o(2),m("",e("torrents.title"),":"),o(),m(" ",i.torrentContent.content.title," ")}}function jn(t,n){if(t&1&&l(0),t&2){let e=n.$implicit,i=n.$index,a=c(3);m(" ",(i>0?", ":"")+e.name+(e.id===(a.torrentContent.content==null||a.torrentContent.content.originalLanguage==null?null:a.torrentContent.content.originalLanguage.id)?" (original)":"")," ")}}function Ln(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3,"\xA0 "),k(4,jn,1,1,null,null,kn),r()),t&2){let e=c().$implicit,i=c();o(2),m("",e("torrents.languages"),":"),o(2),P(i.torrentContent.languages)}}function Vn(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3),r()),t&2){let e,i=c().$implicit,a=c();o(2),m("",i("torrents.original_release_date"),":"),o(),m(" ",(e=a.torrentContent.content==null?null:a.torrentContent.content.releaseDate)!==null&&e!==void 0?e:a.torrentContent.content==null?null:a.torrentContent.content.releaseYear," ")}}function Hn(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3),r()),t&2){let e=c().$implicit,i=c();o(2),m("",e("torrents.episodes"),":"),o(),m(" ",i.torrentContent.episodes.label," ")}}function Gn(t,n){if(t&1&&(s(0,"p"),l(1),r()),t&2){let e=c(2);o(),m(" ",e.torrentContent.content.overview," ")}}function Yn(t,n){if(t&1&&(T(0),s(1,"p")(2,"strong"),l(3),r(),l(4),r(),b()),t&2){let e=c().$implicit;o(3),m("",e("torrents.genres"),":"),o(),m(" ",n.join(", ")," ")}}function Kn(t,n){if(t&1&&(T(0),l(1),v(2,"number"),b()),t&2){let e=c(2).$implicit,i=c();o(),m("(",e("torrents.votes_count_n",Mt(3,An,w(2,1,i.torrentContent.content==null?null:i.torrentContent.content.voteCount))),")")}}function qn(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3),C(4,Kn,3,5,"ng-container"),r()),t&2){let e=c().$implicit,i=c();o(2),m("",e("torrents.rating"),":"),o(),m(" ",i.torrentContent.content==null?null:i.torrentContent.content.voteAverage," / 10 "),o(),d((i.torrentContent.content==null?null:i.torrentContent.content.voteCount)!=null?4:-1)}}function Un(t,n){if(t&1&&(l(0),s(1,"a",16),l(2),r()),t&2){let e=n.$implicit,i=n.$index;m(" ",i>0?", ":"",""),o(),g("href",e.url,It),o(),x(e.metadataSource.name)}}function Xn(t,n){if(t&1&&(s(0,"p")(1,"strong"),l(2),r(),l(3,"\xA0 "),k(4,Un,3,3,"a",16,Pn),r()),t&2){let e=c().$implicit;o(2),m("",e("torrents.external_links"),":"),o(2),P(n)}}function Jn(t,n){if(t&1&&(s(0,"span",17),l(1),r()),t&2){let e=c(2).$implicit;o(),x(e("torrents.files"))}}function Zn(t,n){t&1&&(s(0,"span",18),l(1),v(2,"number"),r()),t&2&&(o(),m("(",w(2,1,n),")"))}function Qn(t,n){if(t&1&&(s(0,"mat-icon"),l(1,"file_present"),r(),C(2,Jn,2,1,"span",17)(3,Zn,3,3,"span",18)),t&2){let e,i=c(2);o(2),d(i.breakpoints.sizeAtLeast("Medium")?2:-1),o(),d((e=i.filesCount())?3:-1,e)}}function Wn(t,n){if(t&1&&(s(0,"p"),l(1),r()),t&2){let e=c(2).$implicit;o(),x(e("torrents.files_no_info"))}}function ti(t,n){if(t&1&&(s(0,"mat-card",19),C(1,Wn,2,1,"p"),h(2,"app-torrent-files-table",20),r()),t&2){let e=c(2);o(),d(e.torrentContent.torrent.filesStatus==="no_info"?1:-1),o(),g("torrent",e.torrentContent.torrent)}}function ei(t,n){if(t&1&&(s(0,"span",17),l(1),r()),t&2){let e=c(2).$implicit;o(),x(e("torrents.edit_tags"))}}function ni(t,n){if(t&1&&(s(0,"mat-icon"),l(1,"sell"),r(),C(2,ei,2,1,"span",17)),t&2){let e=c(2);o(2),d(e.breakpoints.sizeAtLeast("Medium")?2:-1)}}function ii(t,n){if(t&1){let e=B();s(0,"mat-chip-row",26),A("edited",function(a){let p=M(e).$implicit,_=c(3);return $(_.renameTag(p,a.value))})("removed",function(){let a=M(e).$implicit,p=c(3);return $(p.deleteTag(a))}),l(1),s(2,"mat-icon",27),l(3,"cancel"),r()()}if(t&2){let e=n.$implicit;g("editable",!0),o(),m(" ",e," ")}}function oi(t,n){if(t&1&&(s(0,"mat-option",25),l(1),r()),t&2){let e=n.$implicit;g("value",e),o(),x(e)}}function ri(t,n){if(t&1){let e=B();s(0,"mat-card")(1,"mat-form-field",21)(2,"mat-chip-grid",null,0),k(4,ii,4,2,"mat-chip-row",22,K),r(),s(6,"input",23),A("matChipInputTokenEnd",function(a){M(e);let p=c(2);return $(a.value&&p.addTag(a.value))}),r(),s(7,"mat-autocomplete",24,1),A("optionSelected",function(a){M(e);let p=c(2);return $(p.addTag(a.option.viewValue))}),k(9,oi,2,2,"mat-option",25,K),r()()()}if(t&2){let e=pt(3),i=pt(8),a=c().$implicit,p=c();o(4),P(p.torrentContent.torrent.tagNames),o(2),g("placeholder",a("torrents.new_tag"))("formControl",p.newTagCtrl)("matAutocomplete",i)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",p.separatorKeysCodes)("value",p.newTagCtrl.value),o(3),P(p.suggestedTags)}}function ai(t,n){if(t&1&&(s(0,"span",17),l(1),r()),t&2){let e=c(2).$implicit;o(),x(e("torrents.delete"))}}function li(t,n){if(t&1&&(s(0,"mat-icon"),l(1,"delete_forever"),r(),C(2,ai,2,1,"span",17)),t&2){let e=c(2);o(2),d(e.breakpoints.sizeAtLeast("Medium")?2:-1)}}function si(t,n){if(t&1){let e=B();s(0,"mat-card")(1,"mat-card-content",28)(2,"p")(3,"strong"),l(4),r(),h(5,"br"),l(6),r()(),s(7,"mat-card-actions",29)(8,"button",30),A("click",function(){M(e);let a=c(2);return $(a.delete())}),s(9,"mat-icon"),l(10,"delete_forever"),r(),l(11),r()()()}if(t&2){let e=c().$implicit;o(4),x(e("torrents.delete_are_you_sure")),o(2),m("",e("torrents.delete_action_cannot_be_undone")," "),o(5),m("",e("torrents.delete")," ")}}function ci(t,n){t&1&&(s(0,"mat-icon",31),l(1,"close"),r())}function pi(t,n){t&1&&(s(0,"mat-tab"),C(1,ci,2,0,"ng-template",12),r())}function mi(t,n){if(t&1){let e=B();T(0),C(1,zn,1,4,"img",3)(2,Bn,3,3,"h2")(3,Fn,8,8,"p",4)(4,On,5,4,"p",5)(5,Dn,4,3,"p",6),s(6,"p",7)(7,"strong"),l(8),r(),s(9,"span",8),l(10),r()(),s(11,"p")(12,"strong"),l(13),r(),l(14,"\xA0 "),k(15,Nn,2,1,"span",null,$n),r(),C(17,Rn,4,2,"p")(18,Ln,6,1,"p")(19,Vn,4,2,"p")(20,Hn,4,2,"p")(21,Gn,2,1,"p")(22,Yn,5,2,"ng-container")(23,qn,5,3,"p")(24,Xn,6,1,"p"),h(25,"mat-divider",9),s(26,"mat-tab-group",10),A("focusChange",function(a){M(e);let p=c();return $(p.selectTab(a.index==4?0:a.index))}),h(27,"mat-tab",11),s(28,"mat-tab"),C(29,Qn,4,2,"ng-template",12)(30,ti,3,2,"ng-template",13),r(),s(31,"mat-tab"),C(32,ni,3,1,"ng-template",12)(33,ri,11,6,"ng-template",13),r(),s(34,"mat-tab"),C(35,li,3,1,"ng-template",12)(36,si,12,3,"ng-template",13),r(),C(37,pi,2,0,"mat-tab"),r(),b()}if(t&2){let e,i,a,p=n.$implicit,_=c();o(),d((e=_.getAttribute("poster_path","tmdb"))?1:-1,e),o(),d(_.heading?2:-1),o(),d(_.size?3:-1),o(),d(_.published?4:-1),o(),d(_.peers?5:-1),o(3),m("",p("torrents.info_hash"),":"),o(),g("matTooltip",p("torrents.copy_to_clipboard"))("cdkCopyToClipboard",_.torrentContent.infoHash),o(),x(_.torrentContent.infoHash),o(3),m("",p("torrents.source"),":"),o(2),P(_.torrentContent.torrent.sources),o(2),d(_.torrentContent.content?17:-1),o(),d(_.torrentContent.languages!=null&&_.torrentContent.languages.length?18:-1),o(),d(_.torrentContent.content!=null&&_.torrentContent.content.releaseYear?19:-1),o(),d(_.torrentContent.episodes?20:-1),o(),d(_.torrentContent.content!=null&&_.torrentContent.content.overview?21:-1),o(),d((i=_.getCollections("genre"))?22:-1,i),o(),d((_.torrentContent.content==null?null:_.torrentContent.content.voteAverage)!=null?23:-1),o(),d((a=_.torrentContent.content==null?null:_.torrentContent.content.externalLinks)?24:-1,a),o(2),g("selectedIndex",_.selectedTabIndex)("mat-stretch-tabs",!1),o(11),d(_.selectedTabIndex>0?37:-1)}}var Eo=(()=>{class t{constructor(e,i){this.graphQLService=e,this.errorsService=i,this.breakpoints=y(he),this.heading=!0,this.size=!0,this.peers=!0,this.published=!0,this.updated=new wt,this.newTagCtrl=new Ft(""),this.editedTags=Array(),this.suggestedTags=Array(),this.selectedTabIndex=0,this.separatorKeysCodes=[13,188],this.transloco=y(R),this.newTagCtrl.valueChanges.subscribe(a=>(a&&(a=Me(a),this.newTagCtrl.setValue(a,{emitEvent:!1})),e.torrentSuggestTags({input:{prefix:a,exclusions:this.torrentContent.torrent.tagNames}}).pipe(J(p=>{this.suggestedTags.splice(0,this.suggestedTags.length,...p.suggestions.map(_=>_.name))})).subscribe()))}selectTab(e){this.selectedTabIndex=e}addTag(e){this.editTags(i=>[...i,e]),this.saveTags()}renameTag(e,i){this.editTags(a=>a.map(p=>p===e?i:p)),this.saveTags()}deleteTag(e){this.editTags(i=>i.filter(a=>a!==e)),this.saveTags()}editTags(e){this.editedTags=e(this.editedTags),this.newTagCtrl.reset()}saveTags(){this.graphQLService.torrentSetTags({infoHashes:[this.torrentContent.infoHash],tagNames:this.editedTags}).pipe(Y(e=>(this.errorsService.addError(`Error saving tags: ${e.message}`),G))).pipe(J(()=>{this.editedTags=[],this.updated.emit(null)})).subscribe()}delete(){this.graphQLService.torrentDelete({infoHashes:[this.torrentContent.infoHash]}).pipe(Y(e=>(this.errorsService.addError(`Error deleting torrent: ${e.message}`),G))).pipe(J(()=>{this.updated.emit(null)})).subscribe()}getAttribute(e,i){return this.torrentContent.content?.attributes?.find(a=>a.key===e&&(i===void 0||a.source===i))?.value}getCollections(e){let i=this.torrentContent.content?.collections?.filter(a=>a.type===e).map(a=>a.name);return i?.length?i.sort():void 0}filesCount(){return this.torrentContent.torrent.filesStatus==="single"?1:this.torrentContent.torrent.filesCount??void 0}static{this.\u0275fac=function(i){return new(i||t)(ct(Lt),ct(W))}}static{this.\u0275cmp=D({type:t,selectors:[["app-torrent-content"]],inputs:{torrentContent:"torrentContent",heading:"heading",size:"size",peers:"peers",published:"published"},outputs:{updated:"updated"},standalone:!0,features:[N],decls:1,vars:0,consts:[["chipGrid",""],["auto","matAutocomplete"],[4,"transloco"],[1,"poster",3,"ngSrc","alt","width","height"],[1,"size"],[1,"published"],[1,"peers"],[1,"info-hash"],[3,"matTooltip","cdkCopyToClipboard"],[2,"clear","both"],["animationDuration","0",3,"focusChange","selectedIndex","mat-stretch-tabs"],["aria-labelledby","hidden"],["mat-tab-label",""],["matTabContent",""],[3,"routerLink","matTooltip"],[1,"filesize",3,"matTooltip"],["target","_blank",3,"href"],[1,"label"],[1,"files-count"],[1,"torrent-files"],[3,"torrent"],["subscriptSizing","dynamic",1,"form-edit-tags"],[3,"editable"],["autocapitalize","none",3,"matChipInputTokenEnd","placeholder","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","value"],[3,"optionSelected"],[3,"value"],[3,"edited","removed","editable"],["matChipRemove",""],[2,"margin-top","10px"],[1,"button-row"],["mat-stroked-button","","color","warn",3,"click"],[2,"margin-right","0"]],template:function(i,a){i&1&&C(0,mi,38,21,"ng-container",2)},dependencies:[L,Vt,Gt,Nt,Yt,Rt,Kt,Ut,qt,te,ee,Jt,Qt,ne,Ht,tt,ue,Ce,xe,fe,et,zt,Bt,Ot,At,j,Q,nt,Pt,Te,ke],styles:["h2[_ngcontent-%COMP%]{margin-top:10px;max-width:900px;white-space:pre-wrap;word-break:break-all;overflow-wrap:break-word}.poster[_ngcontent-%COMP%]{float:right;margin:10px;border:1px solid currentColor}.info-hash[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-all;overflow-wrap:break-word}.info-hash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:5px;cursor:crosshair;text-decoration:underline;text-decoration-style:dotted}.torrent-files[_ngcontent-%COMP%]{padding-top:10px;max-height:800px;overflow:scroll}.torrent-files[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-bottom:10px;width:800px}.torrent-files[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:20px;border-bottom:1px solid rgba(0,0,0,.12)}.torrent-files[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f5f5f5}.form-edit-tags[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.files-count[_ngcontent-%COMP%]{margin-left:4px}.mat-mdc-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}span.filesize[_ngcontent-%COMP%]{text-decoration:underline;text-decoration-style:dotted}  .mdc-tab[aria-labelledby=hidden]{display:none}  .mdc-tab[role=tab]{padding-left:15px;padding-right:15px}  .mdc-tab .label,   .mdc-tab .files-count{margin-left:8px}"]})}}return t})();export{be as a,_i as b,di as c,nt as d,fi as e,Eo as f};
