import{a as Nt,b as ge}from"./chunk-M2EB7WJQ.js";import{a as Z}from"./chunk-AARZETA6.js";import{a as zt}from"./chunk-QVQAV366.js";import{Aa as pe,B as jt,Ba as me,C as Vt,Ca as _e,D as Lt,Da as de,E as Ht,Ea as ue,Fa as Ce,G as Gt,I as Yt,L as Kt,M as qt,N as Jt,O as Ut,P as Xt,Pa as fe,Q as Qt,R as Zt,Sa as xe,Ua as V,_ as Wt,a as R,b as j,d as kt,e as Pt,f as At,fa as W,g as Bt,i as Ot,ka as te,n as Dt,na as ee,o as Ft,sa as ne,ta as ie,ua as oe,va as re,wa as ae,xa as le,ya as ce,z as Rt,za as se}from"./chunk-HX6RSO6I.js";import{m as $t}from"./chunk-6GS6ZYTX.js";import{B as at,Db as C,Ea as M,Fa as $,Fb as g,Kb as d,Lb as K,Mb as k,N as Y,Nb as P,Oa as vt,Ob as c,Pb as a,Q as Tt,Qb as h,Rb as T,Sb as b,Ub as D,Vc as yt,Wc as Q,Xb as B,Zb as s,a as U,b as ht,cd as Mt,fb as St,fc as ct,gc as l,ha as X,hc as x,ib as o,ic as m,jb as lt,jc as Et,l as S,lc as N,nc as wt,o as G,oc as It,qa as y,qc as E,rc as w,ua as z,xa as bt}from"./chunk-IDBLIDSQ.js";var Oe="array",De="bit",he="bits",Fe="byte",Te="bytes",L="",ze="exponent",Ne="function",be="iec",Re="Invalid number",je="Invalid rounding method",st="jedec",Ve="object",ve=".",Le="round",He="s",Ge="si",Ye="kbit",Ke="kB",qe=" ",Je="string",Ue="0",pt={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Se(t,{bits:e=!1,pad:n=!1,base:i=-1,round:r=2,locale:p=L,localeOptions:_={},separator:A=L,spacer:v=qe,symbols:$e={},standard:I=L,output:ot=Je,fullform:ke=!1,fullforms:_t=[],exponent:dt=-1,roundingMethod:Pe=Le,precision:q=0}={}){let f=dt,F=Number(t),u=[],O=0,rt=L;I===Ge?(i=10,I=st):I===be||I===st?i=2:i===2?I=be:(i=10,I=st);let J=i===10?1e3:1024,Ae=ke===!0,ut=F<0,Ct=Math[Pe];if(typeof t!="bigint"&&isNaN(t))throw new TypeError(Re);if(typeof Ct!==Ne)throw new TypeError(je);if(ut&&(F=-F),(f===-1||isNaN(f))&&(f=Math.floor(Math.log(F)/Math.log(J)),f<0&&(f=0)),f>8&&(q>0&&(q+=8-f),f=8),ot===ze)return f;if(F===0)u[0]=0,rt=u[1]=pt.symbol[I][e?he:Te][f];else{O=F/(i===2?Math.pow(2,f*10):Math.pow(1e3,f)),e&&(O=O*8,O>=J&&f<8&&(O=O/J,f++));let H=Math.pow(10,f>0?r:0);u[0]=Ct(O*H)/H,u[0]===J&&f<8&&dt===-1&&(u[0]=1,f++),rt=u[1]=i===10&&f===1?e?Ye:Ke:pt.symbol[I][e?he:Te][f]}if(ut&&(u[0]=-u[0]),q>0&&(u[0]=u[0].toPrecision(q)),u[1]=$e[u[1]]||u[1],p===!0?u[0]=u[0].toLocaleString():p.length>0?u[0]=u[0].toLocaleString(p,_):A.length>0&&(u[0]=u[0].toString().replace(ve,A)),n&&Number.isInteger(u[0])===!1&&r>0){let H=A||ve,ft=u[0].toString().split(H),xt=ft[1]||L,gt=xt.length,Be=r-gt;u[0]=`${ft[0]}${H}${xt.padEnd(gt+Be,Ue)}`}return Ae&&(u[1]=_t[f]?_t[f]:pt.fullform[I][f]+(e?De:Fe)+(u[0]===1?L:He)),ot===Oe?u:ot===Ve?{value:u[0],symbol:u[1],exponent:f,unit:rt}:u.join(v)}var tt=(()=>{let e=class e{constructor(){this.transloco=y(R)}transform(i){return Se(i,{locale:this.transloco.getActiveLang(),base:2})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=bt({name:"filesize",type:e,pure:!1,standalone:!0});let t=e;return t})();var Xe=t=>t.toLowerCase().replaceAll(/[^a-z0-9\-]/g,"-").replace(/^-+/,"").replaceAll(/-+/g,"-"),Ee=Xe;var Qe={items:[],hasNextPage:!1,totalCount:0,aggregations:{queue:[],status:[]}},et=class{constructor(e,n,i){this.apollo=e,this.errorsService=n,this.currentRequest=new S(0),this.loadingSubject=new S(!1),this.loading$=this.loadingSubject.asObservable(),this.result=Qe,this.resultSubject=new S(this.result),this.result$=this.resultSubject.asObservable(),this.items$=this.resultSubject.pipe(at(r=>r.items)),i.subscribe(r=>{this.loadResult(r)}),this.resultSubject.subscribe(r=>{this.result=r})}connect({}){return this.items$}disconnect(){this.resultSubject.complete()}loadResult(e){this.currentSubscription&&(this.currentSubscription.unsubscribe(),this.currentSubscription=void 0),this.loadingSubject.next(!0);let n=this.currentRequest.getValue()+1;this.currentRequest.next(n);let i=this.apollo.query({query:fe,variables:e,fetchPolicy:"no-cache"}).pipe(at(r=>r.data.torrent.files)).pipe(Y(r=>(this.errorsService.addError(`Error loading item results: ${r.message}`),G)));this.currentSubscription=i.subscribe(r=>{n===this.currentRequest.getValue()&&(this.loadingSubject.next(!1),this.resultSubject.next(r))})}},nt=class{constructor(e){this.torrent=e,this.loading$=new S(!1).asObservable(),this.file={infoHash:e.infoHash,index:0,path:e.name,size:e.size,fileType:e.fileType,extension:e.extension,createdAt:e.createdAt,updatedAt:e.updatedAt},this.result={hasNextPage:!1,items:[this.file],totalCount:1},this.result$=new S(this.result).asObservable(),this.items$=new S([this.file]).asObservable()}connect({}){return this.items$}disconnect(){}};var it=class{constructor(e){let n={infoHash:e,limit:10,page:1};this.controlsSubject=new S(n),this.controls$=this.controlsSubject.asObservable(),this.controls$.pipe(Tt(100)).subscribe(i=>{let r=this.variablesSubject.getValue(),p=we(i);JSON.stringify(r)!==JSON.stringify(p)&&this.variablesSubject.next(p)}),this.variablesSubject=new S(we(n)),this.variables$=this.variablesSubject.asObservable()}update(e){let n=this.controlsSubject.getValue(),i=e(n);JSON.stringify(n)!==JSON.stringify(i)&&this.controlsSubject.next(i)}handlePageEvent(e){this.update(n=>ht(U({},n),{limit:e.pageSize,page:e.page}))}},we=t=>({input:{infoHashes:[t.infoHash],limit:t.limit,page:t.page,totalCount:!0,hasNextPage:!1}});var We=(t,e)=>({x:t,y:e});function tn(t,e){if(t&1&&(c(0,"p"),l(1),E(2,"number"),E(3,"number"),a()),t&2){let n=s().$implicit,i=s();o(),m(" ",n("torrents.showing_x_of_y_files",It(5,We,w(2,1,i.dataSource.result.totalCount),i.torrent.filesCount==null?"?":w(3,3,i.torrent.filesCount)))," ")}}function en(t,e){if(t&1&&(c(0,"th",13),l(1),a()),t&2){let n=s().$implicit;o(),x(n("torrents.file_index"))}}function nn(t,e){if(t&1&&(c(0,"td",14),l(1),a()),t&2){let n=e.$implicit,i=s(2);o(),m(" ",i.item(n).index," ")}}function on(t,e){if(t&1&&(c(0,"th",13),l(1),a()),t&2){let n=s().$implicit;o(),x(n("torrents.file_path"))}}function rn(t,e){if(t&1&&(c(0,"td",14),l(1),a()),t&2){let n=e.$implicit,i=s(2);o(),m(" ",i.item(n).path," ")}}function an(t,e){if(t&1&&(c(0,"th",13),l(1),a()),t&2){let n=s().$implicit;o(),x(n("torrents.file_type"))}}function ln(t,e){if(t&1&&(c(0,"td",14),l(1),a()),t&2){let n,i=e.$implicit,r=s().$implicit,p=s();o(),m(" ",r("file_types."+((n=p.item(i).fileType)!==null&&n!==void 0?n:"unknown"))," ")}}function cn(t,e){if(t&1&&(c(0,"th",13),l(1),a()),t&2){let n=s().$implicit;o(),x(n("torrents.file_size"))}}function sn(t,e){if(t&1&&(c(0,"td",14),l(1),E(2,"filesize"),a()),t&2){let n=e.$implicit,i=s(2);o(),m(" ",w(2,1,i.item(n).size)," ")}}function pn(t,e){t&1&&h(0,"tr",15)}function mn(t,e){t&1&&h(0,"tr",16)}function _n(t,e){if(t&1){let n=D();T(0),c(1,"div",1),h(2,"mat-progress-bar",2),E(3,"async"),a(),C(4,tn,4,8,"p"),c(5,"table",3),T(6,4),C(7,en,2,1,"th",5)(8,nn,2,1,"td",6),b(),T(9,7),C(10,on,2,1,"th",5)(11,rn,2,1,"td",6),b(),T(12,8),C(13,an,2,1,"th",5)(14,ln,2,1,"td",6),b(),T(15,9),C(16,cn,2,1,"th",5)(17,sn,3,3,"td",6),b(),C(18,pn,1,0,"tr",10)(19,mn,1,0,"tr",11),a(),c(20,"app-paginator",12),B("paging",function(r){M(n);let p=s();return $(p.controller.handlePageEvent(r))}),a(),b()}if(t&2){let n=s();o(2),g("mode",w(3,13,n.dataSource.loading$)?"indeterminate":"determinate")("value",0),o(2),d(n.torrent.filesStatus==="over_threshold"?4:-1),o(),g("dataSource",n.dataSource)("multiTemplateDataRows",!0),o(13),g("matHeaderRowDef",n.displayedColumns),o(),g("matRowDefColumns",n.displayedColumns),o(),g("page",n.controls.page)("pageSize",n.controls.limit)("pageLength",n.dataSource.result.items.length)("totalLength",n.dataSource.result.totalCount)("totalIsEstimate",!1)("showLastPage",!0)}}var ye=(()=>{let e=class e{constructor(){this.apollo=y(Ot),this.errorsService=y(Z),this.transloco=y(R),this.displayedColumns=["index","path","type","size"]}ngOnInit(){this.controller=new it(this.torrent.infoHash),this.dataSource=this.torrent.filesStatus==="single"?new nt(this.torrent):new et(this.apollo,this.errorsService,this.controller.variables$),this.controller.controls$.subscribe(i=>{this.controls=i})}item(i){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=z({type:e,selectors:[["app-torrent-files-table"]],inputs:{torrent:"torrent"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[1,"progress-bar-container"],[3,"mode","value"],["mat-table","",1,"table-results",3,"dataSource","multiTemplateDataRows"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","path"],["matColumnDef","type"],["matColumnDef","size"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"paging","page","pageSize","pageLength","totalLength","totalIsEstimate","showLastPage"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(r,p){r&1&&C(0,_n,21,15,"ng-container",0)},dependencies:[V,te,ne,oe,ce,re,ie,se,ae,le,pe,me,j,yt,Q,tt,ge]});let t=e;return t})();var Cn=(t,e)=>e.key,fn=(t,e)=>e.id,xn=(t,e)=>e.metadataSource.key,gn=t=>({count:t});function hn(t,e){if(t&1&&h(0,"img",3),t&2){let n=s().$implicit,i=s();g("ngSrc","https://image.tmdb.org/t/p/w300/"+e)("alt",n("torrents.poster"))("width",i.breakpoints.sizeAtLeast("Medium")?300:150)("height",i.breakpoints.sizeAtLeast("Medium")?450:225)}}function Tn(t,e){if(t&1&&(c(0,"h2")(1,"a",14),l(2),a()()),t&2){let n=s().$implicit,i=s();o(),g("routerLink","permalink/"+i.torrentContent.infoHash)("matTooltip",n("torrents.permalink")),o(),x(i.torrentContent.torrent.name)}}function bn(t,e){if(t&1&&(c(0,"p",4)(1,"strong"),l(2),a(),l(3),E(4,"filesize"),a()),t&2){let n=s().$implicit,i=s();o(2),m("",n("torrents.size"),":"),o(),m(" ",w(4,2,i.torrentContent.torrent.size)," ")}}function vn(t,e){if(t&1&&(c(0,"p",5)(1,"strong"),l(2),a(),l(3),E(4,"timeAgo"),a()),t&2){let n=s().$implicit,i=s();o(2),x(n("torrents.published")),o(),m(" ",w(4,2,i.torrentContent.publishedAt)," ")}}function Sn(t,e){if(t&1&&(c(0,"p",6)(1,"strong"),l(2),a(),l(3),a()),t&2){let n,i=s().$implicit,r=s();o(2),m("",i("torrents.s_l"),":"),o(),Et(" ",(n=r.torrentContent.seeders)!==null&&n!==void 0?n:"?"," / ",(n=r.torrentContent.leechers)!==null&&n!==void 0?n:"?"," ")}}function En(t,e){if(t&1&&(c(0,"span"),l(1),a()),t&2){let n=e.$implicit,i=e.$index;o(),x((i>0?", ":"")+n.name)}}function wn(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3),a()),t&2){let n=s().$implicit,i=s();o(2),m("",n("torrents.title"),":"),o(),m(" ",i.torrentContent.content.title," ")}}function In(t,e){if(t&1&&l(0),t&2){let n=e.$implicit,i=e.$index,r=s(3);m(" ",(i>0?", ":"")+n.name+(n.id===(r.torrentContent.content==null||r.torrentContent.content.originalLanguage==null?null:r.torrentContent.content.originalLanguage.id)?" (original)":"")," ")}}function yn(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3,"\xA0 "),k(4,In,1,1,null,null,fn),a()),t&2){let n=s().$implicit,i=s();o(2),m("",n("torrents.languages"),":"),o(2),P(i.torrentContent.languages)}}function Mn(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3),a()),t&2){let n,i=s().$implicit,r=s();o(2),m("",i("torrents.original_release_date"),":"),o(),m(" ",(n=r.torrentContent.content==null?null:r.torrentContent.content.releaseDate)!==null&&n!==void 0?n:r.torrentContent.content==null?null:r.torrentContent.content.releaseYear," ")}}function $n(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3),a()),t&2){let n=s().$implicit,i=s();o(2),m("",n("torrents.episodes"),":"),o(),m(" ",i.torrentContent.episodes.label," ")}}function kn(t,e){if(t&1&&(c(0,"p"),l(1),a()),t&2){let n=s(2);o(),m(" ",n.torrentContent.content.overview," ")}}function Pn(t,e){if(t&1&&(T(0),c(1,"p")(2,"strong"),l(3),a(),l(4),a(),b()),t&2){let n=s().$implicit;o(3),m("",n("torrents.genres"),":"),o(),m(" ",e.join(", ")," ")}}function An(t,e){if(t&1&&(T(0),l(1),E(2,"number"),b()),t&2){let n=s(2).$implicit,i=s();o(),m("(",n("torrents.votes_count_n",wt(3,gn,w(2,1,i.torrentContent.content==null?null:i.torrentContent.content.voteCount))),")")}}function Bn(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3),C(4,An,3,5,"ng-container"),a()),t&2){let n=s().$implicit,i=s();o(2),m("",n("torrents.rating"),":"),o(),m(" ",i.torrentContent.content==null?null:i.torrentContent.content.voteAverage," / 10 "),o(),d((i.torrentContent.content==null?null:i.torrentContent.content.voteCount)!=null?4:-1)}}function On(t,e){if(t&1&&(l(0),c(1,"a",15),l(2),a()),t&2){let n=e.$implicit,i=e.$index;m(" ",i>0?", ":"",""),o(),g("href",n.url,St),o(),x(n.metadataSource.name)}}function Dn(t,e){if(t&1&&(c(0,"p")(1,"strong"),l(2),a(),l(3,"\xA0 "),k(4,On,3,3,"a",15,xn),a()),t&2){let n=s().$implicit;o(2),m("",n("torrents.external_links"),":"),o(2),P(e)}}function Fn(t,e){if(t&1&&(c(0,"span",16),l(1),a()),t&2){let n=s(2).$implicit;o(),x(n("torrents.files"))}}function zn(t,e){t&1&&(c(0,"span",17),l(1),E(2,"number"),a()),t&2&&(o(),m("(",w(2,1,e),")"))}function Nn(t,e){if(t&1&&(c(0,"mat-icon"),l(1,"file_present"),a(),C(2,Fn,2,1,"span",16)(3,zn,3,3,"span",17)),t&2){let n,i=s(2);o(2),d(i.breakpoints.sizeAtLeast("Medium")?2:-1),o(),d((n=i.filesCount())?3:-1,n)}}function Rn(t,e){if(t&1&&(c(0,"p"),l(1),a()),t&2){let n=s(2).$implicit;o(),x(n("torrents.files_no_info"))}}function jn(t,e){if(t&1&&(c(0,"mat-card",18),C(1,Rn,2,1,"p"),h(2,"app-torrent-files-table",19),a()),t&2){let n=s(2);o(),d(n.torrentContent.torrent.filesStatus==="no_info"?1:-1),o(),g("torrent",n.torrentContent.torrent)}}function Vn(t,e){if(t&1&&(c(0,"span",16),l(1),a()),t&2){let n=s(2).$implicit;o(),x(n("torrents.edit_tags"))}}function Ln(t,e){if(t&1&&(c(0,"mat-icon"),l(1,"sell"),a(),C(2,Vn,2,1,"span",16)),t&2){let n=s(2);o(2),d(n.breakpoints.sizeAtLeast("Medium")?2:-1)}}function Hn(t,e){if(t&1){let n=D();c(0,"mat-chip-row",25),B("edited",function(r){let p=M(n).$implicit,_=s(3);return $(_.renameTag(p,r.value))})("removed",function(){let r=M(n).$implicit,p=s(3);return $(p.deleteTag(r))}),l(1),c(2,"mat-icon",26),l(3,"cancel"),a()()}if(t&2){let n=e.$implicit;g("editable",!0),o(),m(" ",n," ")}}function Gn(t,e){if(t&1&&(c(0,"mat-option",24),l(1),a()),t&2){let n=e.$implicit;g("value",n),o(),x(n)}}function Yn(t,e){if(t&1){let n=D();c(0,"mat-card")(1,"mat-form-field",20)(2,"mat-chip-grid",null,0),k(4,Hn,4,2,"mat-chip-row",21,K),a(),c(6,"input",22),B("matChipInputTokenEnd",function(r){M(n);let p=s(2);return $(r.value&&p.addTag(r.value))}),a(),c(7,"mat-autocomplete",23,1),B("optionSelected",function(r){M(n);let p=s(2);return $(p.addTag(r.option.viewValue))}),k(9,Gn,2,2,"mat-option",24,K),a()()()}if(t&2){let n=ct(3),i=ct(8),r=s().$implicit,p=s();o(4),P(p.torrentContent.torrent.tagNames),o(2),g("placeholder",r("torrents.new_tag"))("formControl",p.newTagCtrl)("matAutocomplete",i)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",p.separatorKeysCodes)("value",p.newTagCtrl.value),o(3),P(p.suggestedTags)}}function Kn(t,e){if(t&1&&(c(0,"span",16),l(1),a()),t&2){let n=s(2).$implicit;o(),x(n("torrents.delete"))}}function qn(t,e){if(t&1&&(c(0,"mat-icon"),l(1,"delete_forever"),a(),C(2,Kn,2,1,"span",16)),t&2){let n=s(2);o(2),d(n.breakpoints.sizeAtLeast("Medium")?2:-1)}}function Jn(t,e){if(t&1){let n=D();c(0,"mat-card")(1,"mat-card-content",27)(2,"p")(3,"strong"),l(4),a(),h(5,"br"),l(6),a()(),c(7,"mat-card-actions",28)(8,"button",29),B("click",function(){M(n);let r=s(2);return $(r.delete())}),c(9,"mat-icon"),l(10,"delete_forever"),a(),l(11),a()()()}if(t&2){let n=s().$implicit;o(4),x(n("torrents.delete_are_you_sure")),o(2),m("",n("torrents.delete_action_cannot_be_undone")," "),o(5),m("",n("torrents.delete")," ")}}function Un(t,e){t&1&&(c(0,"mat-icon",30),l(1,"close"),a())}function Xn(t,e){t&1&&(c(0,"mat-tab"),C(1,Un,2,0,"ng-template",12),a())}function Qn(t,e){if(t&1){let n=D();T(0),C(1,hn,1,4,"img",3)(2,Tn,3,3,"h2")(3,bn,5,4,"p",4)(4,vn,5,4,"p",5)(5,Sn,4,3,"p",6),c(6,"p",7)(7,"strong"),l(8),a(),c(9,"span",8),l(10),a()(),c(11,"p")(12,"strong"),l(13),a(),l(14,"\xA0 "),k(15,En,2,1,"span",null,Cn),a(),C(17,wn,4,2,"p")(18,yn,6,1,"p")(19,Mn,4,2,"p")(20,$n,4,2,"p")(21,kn,2,1,"p")(22,Pn,5,2,"ng-container")(23,Bn,5,3,"p")(24,Dn,6,1,"p"),h(25,"mat-divider",9),c(26,"mat-tab-group",10),B("focusChange",function(r){M(n);let p=s();return $(p.selectTab(r.index==4?0:r.index))}),h(27,"mat-tab",11),c(28,"mat-tab"),C(29,Nn,4,2,"ng-template",12)(30,jn,3,2,"ng-template",13),a(),c(31,"mat-tab"),C(32,Ln,3,1,"ng-template",12)(33,Yn,11,6,"ng-template",13),a(),c(34,"mat-tab"),C(35,qn,3,1,"ng-template",12)(36,Jn,12,3,"ng-template",13),a(),C(37,Xn,2,0,"mat-tab"),a(),b()}if(t&2){let n,i,r,p=e.$implicit,_=s();o(),d((n=_.getAttribute("poster_path","tmdb"))?1:-1,n),o(),d(_.heading?2:-1),o(),d(_.size?3:-1),o(),d(_.published?4:-1),o(),d(_.peers?5:-1),o(3),m("",p("torrents.info_hash"),":"),o(),g("matTooltip",p("torrents.copy_to_clipboard"))("cdkCopyToClipboard",_.torrentContent.infoHash),o(),x(_.torrentContent.infoHash),o(3),m("",p("torrents.source"),":"),o(2),P(_.torrentContent.torrent.sources),o(2),d(_.torrentContent.content?17:-1),o(),d(_.torrentContent.languages!=null&&_.torrentContent.languages.length?18:-1),o(),d(_.torrentContent.content!=null&&_.torrentContent.content.releaseYear?19:-1),o(),d(_.torrentContent.episodes?20:-1),o(),d(_.torrentContent.content!=null&&_.torrentContent.content.overview?21:-1),o(),d((i=_.getCollections("genre"))?22:-1,i),o(),d((_.torrentContent.content==null?null:_.torrentContent.content.voteAverage)!=null?23:-1),o(),d((r=_.torrentContent.content==null?null:_.torrentContent.content.externalLinks)?24:-1,r),o(2),g("selectedIndex",_.selectedTabIndex)("mat-stretch-tabs",!1),o(11),d(_.selectedTabIndex>0?37:-1)}}var fo=(()=>{let e=class e{constructor(i,r){this.graphQLService=i,this.errorsService=r,this.breakpoints=y(zt),this.heading=!0,this.size=!0,this.peers=!0,this.published=!0,this.updated=new vt,this.newTagCtrl=new At(""),this.editedTags=Array(),this.suggestedTags=Array(),this.selectedTabIndex=0,this.separatorKeysCodes=[13,188],this.transloco=y(R),this.newTagCtrl.valueChanges.subscribe(p=>(p&&(p=Ee(p),this.newTagCtrl.setValue(p,{emitEvent:!1})),i.torrentSuggestTags({input:{prefix:p,exclusions:this.torrentContent.torrent.tagNames}}).pipe(X(_=>{this.suggestedTags.splice(0,this.suggestedTags.length,..._.suggestions.map(A=>A.name))})).subscribe()))}selectTab(i){this.selectedTabIndex=i}addTag(i){this.editTags(r=>[...r,i]),this.saveTags()}renameTag(i,r){this.editTags(p=>p.map(_=>_===i?r:_)),this.saveTags()}deleteTag(i){this.editTags(r=>r.filter(p=>p!==i)),this.saveTags()}editTags(i){this.editedTags=i(this.editedTags),this.newTagCtrl.reset()}saveTags(){this.graphQLService.torrentSetTags({infoHashes:[this.torrentContent.infoHash],tagNames:this.editedTags}).pipe(Y(i=>(this.errorsService.addError(`Error saving tags: ${i.message}`),G))).pipe(X(()=>{this.editedTags=[],this.updated.emit(null)})).subscribe()}delete(){this.graphQLService.torrentDelete({infoHashes:[this.torrentContent.infoHash]}).pipe(Y(i=>(this.errorsService.addError(`Error deleting torrent: ${i.message}`),G))).pipe(X(()=>{this.updated.emit(null)})).subscribe()}getAttribute(i,r){return this.torrentContent.content?.attributes?.find(p=>p.key===i&&(r===void 0||p.source===r))?.value}getCollections(i){let r=this.torrentContent.content?.collections?.filter(p=>p.type===i).map(p=>p.name);return r?.length?r.sort():void 0}filesCount(){return this.torrentContent.torrent.filesStatus==="single"?1:this.torrentContent.torrent.filesCount??void 0}};e.\u0275fac=function(r){return new(r||e)(lt(xe),lt(Z))},e.\u0275cmp=z({type:e,selectors:[["app-torrent-content"]],inputs:{torrentContent:"torrentContent",heading:"heading",size:"size",peers:"peers",published:"published"},outputs:{updated:"updated"},standalone:!0,features:[N],decls:1,vars:0,consts:[["chipGrid",""],["auto","matAutocomplete"],[4,"transloco"],[1,"poster",3,"ngSrc","alt","width","height"],[1,"size"],[1,"published"],[1,"peers"],[1,"info-hash"],[3,"matTooltip","cdkCopyToClipboard"],[2,"clear","both"],["animationDuration","0",3,"focusChange","selectedIndex","mat-stretch-tabs"],["aria-labelledby","hidden"],["mat-tab-label",""],["matTabContent",""],[3,"routerLink","matTooltip"],["target","_blank",3,"href"],[1,"label"],[1,"files-count"],[1,"torrent-files"],[3,"torrent"],["subscriptSizing","dynamic",1,"form-edit-tags"],[3,"editable"],["autocapitalize","none",3,"matChipInputTokenEnd","placeholder","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","value"],[3,"optionSelected"],[3,"value"],[3,"edited","removed","editable"],["matChipRemove",""],[2,"margin-top","10px"],[1,"button-row"],["mat-stroked-button","","color","warn",3,"click"],[2,"margin-right","0"]],template:function(r,p){r&1&&C(0,Qn,38,21,"ng-container",2)},dependencies:[V,Rt,Vt,Dt,Lt,Ft,Ht,Yt,Gt,Qt,Zt,qt,Ut,Wt,jt,W,_e,de,ue,Ce,ee,kt,Pt,Bt,$t,j,Q,tt,Mt,Nt,ye],styles:["h2[_ngcontent-%COMP%]{margin-top:10px;max-width:900px;white-space:pre-wrap;word-break:break-all;overflow-wrap:break-word}.poster[_ngcontent-%COMP%]{float:right;margin:10px;border:1px solid currentColor}.info-hash[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-all;overflow-wrap:break-word}.info-hash[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:5px;cursor:crosshair;text-decoration:underline;text-decoration-style:dotted}.torrent-files[_ngcontent-%COMP%]{padding-top:10px;max-height:800px;overflow:scroll}.torrent-files[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-bottom:10px;width:800px}.torrent-files[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:20px;border-bottom:1px solid rgba(0,0,0,.12)}.torrent-files[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f5f5f5}.form-edit-tags[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.files-count[_ngcontent-%COMP%]{margin-left:4px}.mat-mdc-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}  .mdc-tab[aria-labelledby=hidden]{display:none}  .mdc-tab[role=tab]{padding-left:15px;padding-right:15px}  .mdc-tab .label,   .mdc-tab .files-count{margin-left:8px}"]});let t=e;return t})();var Me={movie:{singular:"Movie",plural:"Movies",icon:"movie"},tv_show:{singular:"TV Show",plural:"TV Shows",icon:"live_tv"},music:{singular:"Music",plural:"Music",icon:"music_note"},ebook:{singular:"E-Book",plural:"E-Books",icon:"auto_stories"},comic:{singular:"Comic",plural:"Comics",icon:"comic_bubble"},audiobook:{singular:"Audiobook",plural:"Audiobooks",icon:"mic"},software:{singular:"Software",plural:"Software",icon:"desktop_windows"},game:{singular:"Game",plural:"Games",icon:"sports_esports"},xxx:{singular:"XXX",plural:"XXX",icon:"18_up_rating"},null:{singular:"Unknown",plural:"Unknown",icon:"question_mark"}},go=Object.entries(Me).map(([t,e])=>U({key:t},e)),ho=t=>t?Me[t]:void 0;var Zn=(t,e)=>e.id;function Wn(t,e){if(t&1&&(c(0,"mat-chip",1)(1,"mat-icon",2),l(2,"sell"),a(),l(3),a()),t&2){let n=e.$implicit;o(3),m(" ",n," ")}}function ti(t,e){if(t&1&&l(0),t&2){let n=e.$implicit,i=e.$index,r=s(),p=s().$implicit;m(" ",p("languages."+n.id)+(i<r.length-1?", ":"")," ")}}function ei(t,e){t&1&&(c(0,"mat-chip")(1,"mat-icon",2),l(2,"translate"),a(),k(3,ti,1,1,null,null,Zn),a()),t&2&&(o(3),P(e))}function ni(t,e){t&1&&(c(0,"mat-chip"),l(1),a()),t&2&&(o(),x(e))}function ii(t,e){t&1&&(c(0,"mat-chip")(1,"mat-icon",2),l(2,"aspect_ratio"),a(),l(3),a()),t&2&&(o(3),x(e))}function oi(t,e){t&1&&(c(0,"mat-chip")(1,"mat-icon",2),l(2,"album"),a(),l(3),a()),t&2&&(o(3),x(e))}function ri(t,e){t&1&&(c(0,"mat-chip"),h(1,"mat-icon",3),l(2),a()),t&2&&(o(2),x(e))}function ai(t,e){t&1&&(c(0,"mat-chip"),l(1),a()),t&2&&(o(),x(e))}function li(t,e){if(t&1&&(T(0),c(1,"mat-chip-set"),k(2,Wn,4,1,"mat-chip",1,K),C(4,ei,5,0,"mat-chip")(5,ni,2,1,"mat-chip")(6,ii,4,1,"mat-chip")(7,oi,4,1,"mat-chip")(8,ri,3,1,"mat-chip")(9,ai,2,1,"mat-chip"),a(),b()),t&2){let n,i,r,p,_,A,v=s();o(2),P(v.torrentContent.torrent.tagNames),o(2),d((n=v.torrentContent.languages)?4:-1,n),o(),d((i=v.torrentContent.video3d==null?null:v.torrentContent.video3d.slice(1))?5:-1,i),o(),d((r=v.torrentContent.videoResolution==null?null:v.torrentContent.videoResolution.slice(1))?6:-1,r),o(),d((p=v.torrentContent.videoSource)?7:-1,p),o(),d((_=v.torrentContent.videoCodec)?8:-1,_),o(),d((A=v.torrentContent.videoModifier)?9:-1,A)}}var So=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=z({type:e,selectors:[["app-torrent-chips"]],inputs:{torrentContent:"torrentContent"},standalone:!0,features:[N],decls:1,vars:0,consts:[[4,"transloco"],[1,"chip-primary"],["matChipAvatar",""],["matChipAvatar","","svgIcon","binary"]],template:function(r,p){r&1&&C(0,li,10,6,"ng-container",0)},dependencies:[V,Jt,Kt,Xt,W,j],styles:["mat-chip-set[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;left:4px}"]});let t=e;return t})();export{tt as a,fo as b,Me as c,go as d,ho as e,So as f};
