import{a as D,b as N,c as z,d as De,e as Ne,f as ze,g as Qe}from"./chunk-UZA7YJ2T.js";import{c as Ae,d as Re}from"./chunk-NZNLVSKN.js";import{b as Le}from"./chunk-FYKYJK2Q.js";import{a as Ce}from"./chunk-QPOWPIPD.js";import{a as ye}from"./chunk-W3DXNNS4.js";import{$ as we,A as ve,B as Se,Oa as Be,S as be,Ta as je,Ua as qe,_ as Te,a as se,aa as Me,b as le,ba as Oe,d as pe,e as ue,f as me,fa as Pe,g as de,ga as ke,h as _e,i as ge,n as fe,na as Ie,oa as Ee,pa as $e,q as he,qa as Fe,r as xe,ra as Ve}from"./chunk-FRQ6MKZA.js";import"./chunk-JGYM447R.js";import{j as ae,l as ce}from"./chunk-6GS6ZYTX.js";import{$ as X,B as M,Db as y,Ea as _,Eb as ee,Fa as g,Fb as f,Ib as L,Kb as T,Mb as k,N as W,Nb as I,O as Y,Ob as p,Pb as u,Q as K,Qb as A,Rb as te,Sb as ne,Ub as P,Vc as oe,Wc as re,Xb as h,Zb as l,a,b as s,fc as R,gc as m,hc as E,ib as c,ic as w,jc as $,l as v,lc as ie,o as G,qa as O,qc as S,rc as b,ua as Z}from"./chunk-IDBLIDSQ.js";var Q={items:[],totalCount:0,totalCountIsEstimate:!1,aggregations:{}},V=class{constructor(n,t,i){this.apollo=n,this.errorsService=t,this.currentRequest=new v(0),this.loadingSubject=new v(!1),this.loading$=this.loadingSubject.asObservable(),this.result=Q,this.resultSubject=new v(this.result),this.result$=this.resultSubject.asObservable(),this.items$=this.resultSubject.pipe(M(o=>o.items)),this.overallTotalCount$=this.resultSubject.pipe(M(o=>{let r=0,d=!1;for(let C of o.aggregations.contentType??[])r+=C.count,d=d||C.isEstimate;return{count:r,isEstimate:d}})),this.availableContentTypes$=this.resultSubject.pipe(X((o,r)=>Array.from(new Set([...o,...(r.aggregations.contentType??[]).flatMap(d=>d.value?[d.value]:[])])),[])),this.contentTypeCounts$=this.resultSubject.pipe(M(o=>Object.fromEntries((o.aggregations.contentType??[]).map(r=>[r.value,{count:r.count,isEstimate:r.isEstimate}])))),i.subscribe(o=>{this.input=o.input,this.loadResult({input:s(a({},o.input),{cached:!0})})}),this.resultSubject.subscribe(o=>{this.result=o})}connect({}){return this.items$}disconnect(){this.resultSubject.complete()}refresh(){this.loadResult({input:s(a({},this.input),{cached:!1})})}loadResult(n){this.currentSubscription&&(this.currentSubscription.unsubscribe(),this.currentSubscription=void 0),this.loadingSubject.next(!0);let t=this.currentRequest.getValue()+1;this.currentRequest.next(t);let i=this.apollo.query({query:Be,variables:n,fetchPolicy:"no-cache"}).pipe(M(o=>o.data.torrentContent.search)).pipe(W(o=>(this.errorsService.addError(`Error loading item results: ${o.message}`),G)));this.currentSubscription=i.subscribe(o=>{t===this.currentRequest.getValue()&&(this.loadingSubject.next(!1),this.resultSubject.next(o))})}};var He=e=>({input:{queryString:e.queryString,limit:e.limit,page:e.page,totalCount:!0,hasNextPage:!0,orderBy:[e.orderBy],facets:{contentType:{aggregate:!0,filter:e.contentType?[e.contentType==="null"?null:e.contentType]:void 0},genre:e.facets.genre.active?{aggregate:!0,filter:e.facets.genre.filter}:void 0,language:e.facets.language.active?{aggregate:e.facets.language.active,filter:e.facets.language.filter}:void 0,torrentFileType:e.facets.fileType.active?{aggregate:!0,filter:e.facets.fileType.filter}:void 0,torrentSource:e.facets.torrentSource.active?{aggregate:!0,filter:e.facets.torrentSource.filter}:void 0,torrentTag:e.facets.torrentTag.active?{aggregate:!0,filter:e.facets.torrentTag.filter}:void 0,videoResolution:e.facets.videoResolution.active?{aggregate:!0,filter:e.facets.videoResolution.filter}:void 0,videoSource:e.facets.videoSource.active?{aggregate:!0,filter:e.facets.videoSource.filter}:void 0}}}),x={active:!1},B=class{constructor(n){this.controlsSubject=new v(n),this.controls$=this.controlsSubject.asObservable(),this.paramsSubject=new v(He(n)),this.params$=this.paramsSubject.asObservable(),this.controls$.pipe(K(100)).subscribe(t=>{let i=this.paramsSubject.getValue(),o=He(t);JSON.stringify(i)!==JSON.stringify(o)&&this.paramsSubject.next(o)})}update(n){let t=this.controlsSubject.getValue(),i=n(t);JSON.stringify(t)!==JSON.stringify(i)&&this.controlsSubject.next(i)}selectLanguage(n){this.update(t=>s(a({},t),{language:n}))}selectContentType(n){this.update(t=>s(a({},t),{contentType:n,page:1,facets:s(a({},t.facets),{genre:H(n,Je.contentTypes)?t.facets.genre:x,videoResolution:H(n,Ue.contentTypes)?t.facets.videoResolution:x,videoSource:H(n,Ge.contentTypes)?t.facets.videoSource:x})}))}activateFacet(n){this.update(t=>s(a({},t),{facets:n.patchInput(t.facets,s(a({},n.extractInput(t.facets)),{active:!0}))}))}deactivateFacet(n){this.update(t=>{let i=n.extractInput(t.facets);return s(a({},t),{page:i.filter?1:t.page,facets:n.patchInput(t.facets,s(a({},i),{active:!1,filter:void 0}))})})}activateFilter(n,t){this.update(i=>{let o=n.extractInput(i.facets);return s(a({},i),{page:1,facets:n.patchInput(i.facets,s(a({},o),{filter:Array.from(new Set([...o.filter??[],t])).sort()}))})})}deactivateFilter(n,t){this.update(i=>{let o=n.extractInput(i.facets),r=o.filter?.filter(d=>d!==t);return s(a({},i),{page:1,facets:n.patchInput(i.facets,s(a({},o),{filter:r?.length?r:void 0}))})})}setQueryString(n){n=n||void 0,this.update(t=>{let i=t.orderBy;return n?n!==t.queryString&&(i=U):i.field==="relevance"&&(i=F),s(a({},t),{queryString:n,orderBy:i,page:n===t.queryString?t.page:1})})}selectOrderBy(n){let t={field:n,descending:J.find(i=>i.field===n)?.descending??!1};this.update(i=>s(a({},i),{orderBy:t.field!=="relevance"||i.queryString?t:F,page:1}))}toggleOrderByDirection(){this.update(n=>s(a({},n),{orderBy:s(a({},n.orderBy),{descending:!n.orderBy.descending}),page:1}))}handlePageEvent(n){this.update(t=>s(a({},t),{limit:n.pageSize,page:n.page}))}},tt={key:"torrent_source",icon:"mediation",allowNull:!1,extractInput:e=>e.torrentSource,patchInput:(e,n)=>s(a({},e),{torrentSource:n}),extractAggregations:e=>e.torrentSource??[],resolveLabel:e=>e.label},nt={key:"torrent_tag",icon:"sell",allowNull:!1,extractInput:e=>e.torrentTag,patchInput:(e,n)=>s(a({},e),{torrentTag:n}),extractAggregations:e=>e.torrentTag??[],resolveLabel:e=>e.value},it={key:"file_type",icon:"file_present",allowNull:!1,extractInput:e=>e.fileType,patchInput:(e,n)=>s(a({},e),{fileType:n}),extractAggregations:e=>e.torrentFileType??[],resolveLabel:(e,n)=>n.translate(`file_types.${e.value}`)},ot={key:"language",icon:"translate",allowNull:!1,extractInput:e=>e.language,patchInput:(e,n)=>s(a({},e),{language:n}),extractAggregations:e=>e.language??[],resolveLabel:(e,n)=>n.translate(`languages.${e.value}`)},Je={key:"genre",icon:"theater_comedy",allowNull:!1,contentTypes:["movie","tv_show"],extractInput:e=>e.genre,patchInput:(e,n)=>s(a({},e),{genre:n}),extractAggregations:e=>e.genre??[],resolveLabel:e=>e.label},Ue={key:"video_resolution",icon:"aspect_ratio",allowNull:!0,contentTypes:["movie","tv_show","xxx"],extractInput:e=>e.videoResolution,patchInput:(e,n)=>s(a({},e),{videoResolution:n}),extractAggregations:e=>(e.videoResolution??[]).map(n=>s(a({},n),{value:n.value??null})),resolveLabel:e=>e.value?.slice(1)??"?"},Ge={key:"video_source",icon:"album",allowNull:!0,contentTypes:["movie","tv_show","xxx"],extractInput:e=>e.videoSource,patchInput:(e,n)=>s(a({},e),{videoSource:n}),extractAggregations:e=>(e.videoSource??[]).map(n=>s(a({},n),{value:n.value??null})),resolveLabel:e=>e.value??"?"},j=[tt,nt,it,ot,Je,Ue,Ge],J=[{field:"relevance",descending:!0},{field:"published_at",descending:!0},{field:"updated_at",descending:!0},{field:"size",descending:!0},{field:"files_count",descending:!0},{field:"seeders",descending:!0},{field:"leechers",descending:!0},{field:"name",descending:!1}],F={field:"published_at",descending:!0},U={field:"relevance",descending:!0},H=(e,n)=>!n||e&&n.includes(e);var We=(e,n)=>n.key,rt=(e,n)=>n.field,Ye=(e,n)=>n.value;function at(e,n){if(e&1&&(p(0,"small"),m(1),S(2,"number"),u()),e&2){let t=n;c(),$("",t.isEstimate?"~":"","",b(2,2,t.count),"")}}function ct(e,n){if(e&1&&(p(0,"small"),m(1),S(2,"number"),u()),e&2){let t=n;c(),$("",t.isEstimate?"~":"","",b(2,2,t.count),"")}}function st(e,n){e&1&&(p(0,"small"),m(1,"0"),u())}function lt(e,n){if(e&1){let t=P();p(0,"li",5),h("click",function(){_(t);let o=l().$implicit,r=l(2);return g(r.controller.selectContentType(o.key))}),p(1,"mat-icon"),m(2),u(),m(3),y(4,ct,3,4,"small"),S(5,"async"),y(6,st,2,0,"small"),u()}if(e&2){let t,i=l().$implicit,o=l().$implicit,r=l();L(r.controls.contentType===i.key?"active":""),c(2),E(i.icon),c(),w(" ",o("content_types.plural."+i.key)," "),c(),T((t=(t=b(5,5,r.dataSource.contentTypeCounts$))==null?null:t[i.key])?4:6,t)}}function pt(e,n){if(e&1&&(y(0,lt,7,7,"li",23),S(1,"async")),e&2){let t,i=n.$implicit,o=l(2);T(i.key==="null"||(t=b(1,1,o.dataSource.availableContentTypes$))!=null&&t.includes(i.key)?0:-1)}}function ut(e,n){if(e&1){let t=P();p(0,"mat-checkbox",29),h("change",function(o){let r=_(t).$implicit,d=l(3).$implicit,C=l(2);return g(o.checked?C.controller.activateFilter(d,r.value):C.controller.deactivateFilter(d,r.value))}),m(1),p(2,"small"),m(3),S(4,"number"),u()()}if(e&2){let t=n.$implicit,i=l(3).$implicit;f("checked",i.filter==null?null:i.filter.includes(t.value)),c(),w(" ",t.label," "),c(2),$("",t.isEstimate?"~":"","",b(4,4,t.count),"")}}function mt(e,n){if(e&1&&(p(0,"section",26),k(1,ut,5,6,"mat-checkbox",28,Ye),u()),e&2){let t=l(2).$implicit;c(),I(t.aggregations)}}function dt(e,n){if(e&1){let t=P();p(0,"mat-checkbox",31),h("change",function(){let o=_(t).$implicit,r=l(3).$implicit,d=l(2);return g(d.controller.activateFilter(r,o.value))}),m(1),p(2,"small"),m(3),S(4,"number"),u()()}if(e&2){let t=n.$implicit;c(),w(" ",t.label," "),c(2),$("",t.isEstimate?"~":"","",b(4,3,t.count),"")}}function _t(e,n){if(e&1&&(p(0,"section",27),k(1,dt,5,5,"mat-checkbox",30,Ye),u()),e&2){let t=l(2).$implicit;c(),I(t.aggregations)}}function gt(e,n){if(e&1){let t=P();p(0,"mat-expansion-panel",25),h("opened",function(){_(t);let o=l().$implicit,r=l(2);return g(r.controller.activateFacet(o))})("closed",function(){_(t);let o=l().$implicit,r=l(2);return g(r.controller.deactivateFacet(o))}),p(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),m(4),u(),m(5),u()(),y(6,mt,3,0,"section",26)(7,_t,3,0,"section",27),u()}if(e&2){let t=l().$implicit,i=l().$implicit;f("expanded",t.active),c(4),E(t.icon),c(),w(" ",i("facets."+t.key)," "),c(),T(t.filter!=null&&t.filter.length?6:7)}}function ft(e,n){if(e&1&&y(0,gt,8,4,"mat-expansion-panel",24),e&2){let t=n.$implicit;T(t.relevant?0:-1)}}function ht(e,n){if(e&1){let t=P();p(0,"button",17),h("click",function(){_(t);let o=l(2);return o.queryString.reset(),g(o.controller.setQueryString(null))}),p(1,"mat-icon"),m(2,"close"),u()()}if(e&2){let t=l().$implicit;f("matTooltip",t("torrents.clear_search"))}}function xt(e,n){if(e&1&&(p(0,"mat-option",32),m(1),u()),e&2){let t=l().$implicit,i=l().$implicit;f("value",t.field),c(),w(" ",i("torrents.ordering."+t.field)," ")}}function Ct(e,n){if(e&1&&y(0,xt,2,2,"mat-option",32),e&2){let t=n.$implicit,i=l(2);T(t.field!="relevance"||i.queryString.value?0:-1)}}function yt(e,n){if(e&1){let t=P();te(0),p(1,"mat-drawer-container",2)(2,"mat-drawer",3,0)(4,"mat-expansion-panel",4)(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"mat-icon"),m(8,"interests"),u(),m(9),u()(),p(10,"section")(11,"nav")(12,"ul")(13,"li",5),h("click",function(){_(t);let o=l();return g(o.controller.selectContentType(null))}),p(14,"mat-icon",6),m(15,"emergency"),u(),m(16),y(17,at,3,4,"small"),S(18,"async"),u(),k(19,pt,2,3,null,null,We),u()()()(),k(21,ft,1,1,null,null,We),S(23,"async"),u(),p(24,"mat-drawer-content")(25,"div",7)(26,"div",8)(27,"button",9),h("click",function(){_(t);let o=R(3);return g(o.toggle())}),p(28,"mat-icon",10),m(29),u()()(),p(30,"div",11)(31,"mat-form-field",12)(32,"input",13),h("keyup.enter",function(){_(t);let o=l();return g(o.controller.setQueryString(o.queryString.value))}),u(),y(33,ht,3,1,"button",14),u()(),p(34,"div",15)(35,"mat-form-field",12)(36,"mat-label"),m(37),u(),p(38,"mat-select",16),h("valueChange",function(o){_(t);let r=l();return g(r.controller.selectOrderBy(o))}),k(39,Ct,1,1,null,null,rt),u()(),p(41,"button",17),h("click",function(){_(t);let o=l();return g(o.controller.toggleOrderByDirection())}),p(42,"mat-icon"),m(43),u()()(),p(44,"div",18)(45,"button",19),h("click",function(){_(t);let o=l();return g(o.dataSource.refresh())}),p(46,"mat-icon"),m(47,"sync"),u()()()(),A(48,"mat-divider"),p(49,"app-torrents-bulk-actions",20),h("updated",function(){_(t);let o=l();return g(o.dataSource.refresh())}),u(),A(50,"mat-divider"),p(51,"app-torrents-table",21),h("updated",function(){_(t);let o=l();return g(o.dataSource.refresh())}),u(),p(52,"app-paginator",22),h("paging",function(o){_(t);let r=l();return g(r.controller.handlePageEvent(o))}),u()()(),ne()}if(e&2){let t,i=n.$implicit,o=R(3),r=l();c(2),f("mode",r.breakpoints.sizeAtLeast("Medium")?"side":"over")("opened",r.breakpoints.sizeAtLeast("Medium")),ee("role",r.breakpoints.sizeAtLeast("Medium")?"navigation":"dialog"),c(2),f("expanded",r.breakpoints.sizeAtLeast("Medium")),c(5),w(" ",i("facets.content_type")," "),c(4),L(r.controls.contentType===null?"active":""),c(3),w("",i("content_types.plural.all")," "),c(),T((t=b(18,29,r.dataSource.overallTotalCount$))?17:-1,t),c(2),I(r.contentTypes),c(2),I(b(23,31,r.facets$)),c(6),f("matTooltip",i("torrents.toggle_drawer")),c(2),E(o.opened?"arrow_circle_left":"arrow_circle_right"),c(3),f("placeholder",i("torrents.search"))("formControl",r.queryString),c(),T(r.queryString.value?33:-1),c(4),E(i("torrents.order_by")),c(),f("value",r.controls.orderBy.field),c(),I(r.orderByOptions),c(2),f("matTooltip",i("torrents.order_direction_toggle")),c(2),E(r.controls.orderBy.descending?"arrow_downward":"arrow_upward"),c(2),f("matTooltip",i("torrents.refresh")),c(4),f("selectedItems$",r.selectedItems$),c(2),f("dataSource",r.dataSource)("displayedColumns",r.breakpoints.sizeAtLeast("Medium")?r.allColumns:r.compactColumns)("selection",r.selection),c(),f("page",r.controls.page)("pageSize",r.controls.limit)("pageLength",r.dataSource.result.items.length)("totalLength",r.dataSource.result.totalCount)("totalIsEstimate",r.dataSource.result.totalCountIsEstimate)("hasNextPage",r.dataSource.result.hasNextPage)}}var gn=(()=>{let n=class n{constructor(){this.route=O(ae),this.router=O(ce),this.apollo=O(ge),this.errorsService=O(Ce),this.transloco=O(se),this.breakpoints=O(ye),this.contentTypes=Re,this.orderByOptions=J,this.allColumns=Ne,this.compactColumns=ze,this.queryString=new me(""),this.result=Q,this.selection=new _e(!0,[]),this.selectedItemsSubject=new v([]),this.selectedItems$=this.selectedItemsSubject.asObservable(),this.subscriptions=Array(),this.controls=s(a({},vt),{language:this.transloco.getActiveLang()}),this.controller=new B(this.controls),this.dataSource=new V(this.apollo,this.errorsService,this.controller.params$),this.subscriptions.push(this.controller.controls$.subscribe(i=>{this.controls=i})),this.facets$=this.controller.controls$.pipe(Y(this.dataSource.result$),M(([i,o])=>j.map(r=>s(a(a({},r),r.extractInput(i.facets)),{relevant:!r.contentTypes||!!(i.contentType&&i.contentType!=="null"&&r.contentTypes.includes(i.contentType)),aggregations:r.extractAggregations(o.aggregations).map(d=>s(a({},d),{label:r.resolveLabel(d,this.transloco)}))})))),this.subscriptions.push(this.dataSource.result$.subscribe(i=>{this.result=i;let o=new Set(i.items.map(({infoHash:r})=>r));this.selection.deselect(...this.selection.selected.filter(r=>!o.has(r)))}))}ngOnInit(){this.subscriptions.push(this.route.queryParams.subscribe(i=>{let o=N(i,"query");this.queryString.setValue(o??null),this.controller.update(r=>{let d=D(i,"facets"),C=r.orderBy;return o?o!==r.queryString&&(C=U):C.field==="relevance"&&(C=F),s(a({},r),{queryString:o,orderBy:C,contentType:St(i,"content_type"),limit:z(i,"limit")??r.limit,page:z(i,"page")??r.page,facets:j.reduce((Xe,q)=>{let Ze=d?.includes(q.key)??!1,et=D(i,q.key);return q.patchInput(Xe,{active:Ze,filter:et})},r.facets)})})}),this.controller.controls$.subscribe(i=>{let o=i.page,r=i.limit;o===1&&(o=void 0),r===Ke&&(r=void 0),this.router.navigate([],{relativeTo:this.route,queryParams:a({query:i.queryString?encodeURIComponent(i.queryString):void 0,page:o,limit:r,content_type:i.contentType},bt(i.facets)),queryParamsHandling:"merge"})}),this.selection.changed.subscribe(i=>{let o=new Set(i.source.selected);this.selectedItemsSubject.next(this.result.items.filter(r=>o.has(r.infoHash)))}))}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=new Array}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Z({type:n,selectors:[["app-torrents-search"]],standalone:!0,features:[ie],decls:1,vars:0,consts:[["drawer",""],[4,"transloco"],[1,"drawer-container"],[1,"drawer",3,"mode","opened"],[1,"panel-content-type",3,"expanded"],[3,"click"],["fontSet","material-icons"],[1,"search-form"],[1,"form-field-container","button-container","button-container-toggle-drawer"],["type","button","mat-icon-button","",1,"button-toggle-drawer",3,"click","matTooltip"],["aria-label","Side nav toggle icon","fontSet","material-icons"],[1,"form-field-container","form-field-container-search-query"],["subscriptSizing","dynamic"],["matInput","","autocapitalize","none",3,"keyup.enter","placeholder","formControl"],["mat-icon-button","",3,"matTooltip"],[1,"form-field-container","form-field-container-order-by"],[3,"valueChange","value"],["mat-icon-button","",3,"click","matTooltip"],[1,"form-field-container","button-container","button-container-refresh"],["mat-mini-fab","","color","primary",3,"click","matTooltip"],[3,"updated","selectedItems$"],[3,"updated","dataSource","displayedColumns","selection"],[3,"paging","page","pageSize","pageLength","totalLength","totalIsEstimate","hasNextPage"],[3,"class"],[3,"expanded"],[3,"opened","closed","expanded"],[1,"filtered"],[1,"unfiltered"],[3,"checked"],[3,"change","checked"],["checked","true"],["checked","true",3,"change"],[3,"value"]],template:function(o,r){o&1&&y(0,yt,53,33,"ng-container",1)},dependencies:[qe,fe,xe,he,be,Te,we,Me,Oe,Se,ve,Pe,ke,Ee,Fe,Ve,$e,Ie,pe,ue,de,le,oe,re,je,Le,Qe,De],styles:[".mat-expansion-panel[_ngcontent-%COMP%]{margin-top:14px;margin-right:14px}.mat-expansion-panel[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-left:-10px}.mat-expansion-panel.panel-content-type[_ngcontent-%COMP%]{margin-top:20px}.mat-expansion-panel.panel-content-type[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-left:0}.mat-expansion-panel[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0;margin:0}.mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%], .mat-expansion-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;line-height:40px;padding-left:40px}.mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .mat-expansion-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:8px}.mat-expansion-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.mat-expansion-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{top:6px}.mat-expansion-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{float:right;font-size:.8rem}.mat-expansion-panel[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:block}.mat-expansion-panel[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{min-width:220px}.mat-expansion-panel[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:10px;position:absolute;right:0}.search-form[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:10px;position:relative;clear:both;display:flex;flex-wrap:wrap}.search-form[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;position:relative;margin-left:20px;padding-bottom:20px}.search-form[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{top:8px}.search-form[_ngcontent-%COMP%]   .form-field-container.form-field-container-order-by[_ngcontent-%COMP%]{padding-right:40px}.search-form[_ngcontent-%COMP%]   .form-field-container.form-field-container-order-by[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:0}.search-form[_ngcontent-%COMP%]   .form-field-container.form-field-container-search-query[_ngcontent-%COMP%]{width:300px}.search-form[_ngcontent-%COMP%]   .form-field-container.form-field-container-search-query[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:0}.search-form[_ngcontent-%COMP%]   .form-field-container.form-field-container-search-query[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-right:50px}.search-form[_ngcontent-%COMP%]   .button-container-toggle-direction[_ngcontent-%COMP%]{margin-left:4px}app-paginator[_ngcontent-%COMP%]{float:right;padding-top:14px;padding-bottom:20px}"],changeDetection:0});let e=n;return e})(),Ke=20,vt={language:"en",page:1,limit:Ke,contentType:null,orderBy:F,facets:{genre:x,language:x,fileType:x,torrentSource:x,torrentTag:x,videoResolution:x,videoSource:x}},St=(e,n)=>{let t=N(e,n);return t&&t in Ae?t:null},bt=e=>{let[n,t]=j.reduce((i,o)=>{let r=o.extractInput(e);return r.active?[[...i[0],o.key],r.filter?s(a({},i[1]),{[o.key]:r.filter}):i[1]]:i},[[],{}]);return a({facets:n.length?n.join(","):void 0},Object.fromEntries(Object.entries(t).map(([i,o])=>[i,encodeURIComponent(o.join(","))])))};export{gn as TorrentsSearchComponent};
