import{l as ae}from"./chunk-AMUSMSN6.js";import{A as re,Aa as he,B as le,Ba as be,Ua as k,a as V,b as D,fa as pe,ka as ce,n as ie,na as $,oa as se,r as ne,sa as me,ta as de,ua as _e,va as ue,wa as ge,xa as xe,ya as Ce,z as oe,za as fe}from"./chunk-EH7PJXWD.js";import{c as Z,d as ee,g as A,h as L,i as te}from"./chunk-6XXA7HXI.js";import{$b as a,$c as Q,Cb as d,Ea as u,Fa as g,Gb as R,Hb as _,Jc as J,Kb as O,Mb as S,Na as E,Nb as q,Ob as H,Pb as N,Qb as l,Rb as p,Sb as w,Tb as C,Ub as f,Wb as b,Zb as x,_c as X,ad as Y,kb as o,kc as c,l as z,lc as y,mc as m,pc as M,qa as P,qc as j,rc as G,sc as K,tc as U,ua as I,uc as h,vc as T,wc as W,xa as B,zb as F}from"./chunk-3DR3CJRN.js";var Pe=(t,n,e)=>({x:t,y:n,z:e}),Ie=(t,n)=>({x:t,y:n}),Ee=t=>[null,t];function Me(t,n){if(t&1&&(l(0,"mat-option",4),c(1),p()),t&2){let e=n.$implicit;_("value",e),o(),m(" ",e," ")}}function Je(t,n){if(t&1&&(c(0),h(1,"number"),h(2,"number"),h(3,"number")),t&2){let e=a().$implicit,i=a();m(" ",e("paginator.x_to_y_of_z",U(7,Pe,T(1,1,i.firstItemIndex),T(2,3,i.lastItemIndex),T(3,5,i.totalLength)))," ")}}function Qe(t,n){if(t&1&&(c(0),h(1,"number"),h(2,"number")),t&2){let e=a().$implicit,i=a();m(" ",e("paginator.x_to_y",K(5,Ie,T(1,1,i.firstItemIndex),T(2,3,i.lastItemIndex)))," ")}}function Ve(t,n){if(t&1){let e=b();l(0,"button",7),x("click",function(){let r;u(e);let s=a(2);return s.page=(r=s.pageCount)!==null&&r!==void 0?r:1,g(s.emitChange())}),l(1,"mat-icon"),c(2,"last_page"),p()()}if(t&2){let e=a().$implicit,i=a();_("disabled",G(2,Ee,i.page).includes(i.pageCount))("matTooltip",e("paginator.last_page"))}}function De(t,n){if(t&1){let e=b();C(0),l(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c(4,"Items per page"),p(),l(5,"mat-select",3),x("valueChange",function(r){u(e);let s=a();return s.pageSize=r,s.page=1,g(s.emitChange())}),H(6,Me,2,2,"mat-option",4,q),p()(),l(8,"p",5),d(9,Je,4,11)(10,Qe,3,8),p(),l(11,"div",6)(12,"button",7),x("click",function(){u(e);let r=a();return r.page=1,g(r.emitChange())}),l(13,"mat-icon"),c(14,"first_page"),p()(),l(15,"button",7),x("click",function(){u(e);let r=a();return r.page=r.page-1,g(r.emitChange())}),l(16,"mat-icon"),c(17,"navigate_before"),p()(),l(18,"button",7),x("click",function(){u(e);let r=a();return r.page=r.page+1,g(r.emitChange())}),l(19,"mat-icon"),c(20,"navigate_next"),p()(),d(21,Ve,3,4,"button",8),p()(),f()}if(t&2){let e=n.$implicit,i=a();o(5),_("value",i.pageSize),o(),N(i.pageSizes),o(3),S(i.hasTotalLength?9:10),o(3),_("disabled",!i.hasPreviousPage)("matTooltip",e("paginator.first_page")),o(3),_("disabled",!i.hasPreviousPage)("matTooltip",e("paginator.previous_page")),o(3),_("disabled",!i.actuallyHasNextPage)("matTooltip",e("paginator.next_page")),o(3),S(i.showLastPage?21:-1)}}var ut=(()=>{class t{constructor(){this.page=1,this.pageSize=10,this.pageSizes=[10,20,50,100],this.pageLength=0,this.totalLength=null,this.totalIsEstimate=!1,this.hasNextPage=null,this.showLastPage=!1,this.paging=new E}get firstItemIndex(){return(this.page-1)*this.pageSize+1}get lastItemIndex(){return(this.page-1)*this.pageSize+this.pageLength}get hasTotalLength(){return typeof this.totalLength=="number"}get hasPreviousPage(){return this.page>1}get pageCount(){return typeof this.totalLength!="number"?null:Math.ceil(this.totalLength/this.pageSize)}get actuallyHasNextPage(){return typeof this.hasNextPage=="boolean"?this.hasNextPage:typeof this.totalLength!="number"?!1:this.page*this.pageSize<this.totalLength}emitChange(){this.paging.emit({page:this.page,pageSize:this.pageSize})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["app-paginator"]],inputs:{page:[2,"page","page",J],pageSize:[2,"pageSize","pageSize",J],pageSizes:"pageSizes",pageLength:[2,"pageLength","pageLength",J],totalLength:"totalLength",totalIsEstimate:"totalIsEstimate",hasNextPage:"hasNextPage",showLastPage:"showLastPage"},outputs:{paging:"paging"},standalone:!0,features:[F,M],decls:1,vars:0,consts:[[4,"transloco"],[1,"paginator"],["subscriptSizing","dynamic",1,"field-items-per-page"],[3,"valueChange","value"],[3,"value"],[1,"paginator-description"],[1,"paginator-navigation"],["mat-icon-button","",3,"click","disabled","matTooltip"],["mat-icon-button","",3,"disabled","matTooltip"]],template:function(i,r){i&1&&d(0,De,22,9,"ng-container",0)},dependencies:[k,ie,ne,le,re,pe,se,$,D,Q],styles:[".paginator[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.paginator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 20px}.paginator[_ngcontent-%COMP%]   .field-items-per-page[_ngcontent-%COMP%]{width:140px}"]})}}return t})();var Se=(()=>{class t{constructor(){this.transloco=P(V)}transform(e){return ae(e,this.transloco.getActiveLang())}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=B({name:"timeAgo",type:t,pure:!1,standalone:!0})}}return t})();var $e=()=>["expandedDetail"];function ke(t,n){if(t&1&&(l(0,"th",18),c(1),p()),t&2){let e=a().$implicit;o(),y(e("general.id"))}}function Oe(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),c(1),p()}if(t&2){let e=n.$implicit,i=a(2);o(),m(" ",i.item(e).id," ")}}function Ae(t,n){if(t&1&&(l(0,"th",18),c(1),p()),t&2){let e=a().$implicit;o(),m(" ",e("dashboard.queues.queue")," ")}}function Le(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),c(1),p()}if(t&2){let e=n.$implicit,i=a(2);o(),m(" ",i.item(e).queue," ")}}function ze(t,n){if(t&1&&(l(0,"th",18),c(1),p()),t&2){let e=a().$implicit;o(),m(" ",e("dashboard.queues.priority")," ")}}function Be(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),c(1),h(2,"number"),p()}if(t&2){let e=n.$implicit,i=a(2);o(),m(" ",T(2,1,i.item(e).priority)," ")}}function Fe(t,n){if(t&1&&(l(0,"th",18),c(1),p()),t&2){let e=a().$implicit;o(),m(" ",e("dashboard.queues.status")," ")}}function Re(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),c(1),p()}if(t&2){let e=n.$implicit,i=a(2);o(),m(" ",i.item(e).status," ")}}function qe(t,n){if(t&1&&(l(0,"th",18),c(1),p()),t&2){let e=a().$implicit;o(),y(e("general.error"))}}function He(t,n){if(t&1&&(c(0),h(1,"slice")),t&2){let e=a().$implicit,i=a(2);m(" ",W(1,1,i.item(e).error,0,20)+"..."," ")}}function Ne(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),d(1,He,2,5),p()}if(t&2){let e=n.$implicit;o(),S(e.error?1:-1)}}function je(t,n){if(t&1&&(l(0,"th",20),c(1),p()),t&2){let e=a().$implicit;o(),m(" ",e("dashboard.queues.created_at")," ")}}function Ge(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),c(1),h(2,"timeAgo"),p()}if(t&2){let e=n.$implicit,i=a(2);o(),m(" ",T(2,1,i.item(e).createdAt)," ")}}function Ke(t,n){if(t&1&&(l(0,"th",20),c(1),p()),t&2){let e=a().$implicit;o(),m(" ",e("dashboard.queues.ran_at")," ")}}function Ue(t,n){t&1&&(c(0),h(1,"timeAgo")),t&2&&m(" ",T(1,1,n)," ")}function We(t,n){if(t&1){let e=b();l(0,"td",19),x("click",function(r){let s=u(e).$implicit;return a(2).toggleQueueJobId(s.id),g(r.stopPropagation())}),d(1,Ue,2,3),p()}if(t&2){let e,i=n.$implicit;o(),S((e=i.ranAt)?1:-1,e)}}function Xe(t,n){if(t&1&&(l(0,"h5")(1,"span",23),c(2),p()(),l(3,"pre",24),c(4),p()),t&2){let e=n,i=a(2).$implicit;o(),_("matTooltip",i("torrents.copy_to_clipboard"))("cdkCopyToClipboard",e),o(),m("",i("general.error"),":"),o(2),y(e)}}function Ye(t,n){if(t&1&&(l(0,"td",21)(1,"div",22)(2,"p")(3,"strong"),c(4),p(),c(5,"\xA0"),l(6,"span",23),c(7),p()(),l(8,"h5")(9,"span",23),c(10),p()(),l(11,"pre",24),c(12),p(),d(13,Xe,5,4),p()()),t&2){let e,i=n.$implicit,r=a().$implicit,s=a();R("colspan",s.displayedColumns.length),o(),_("@detailExpand",s.expandedId.getValue()===i.id?"expanded":"collapsed"),o(3),m("",r("general.id"),":"),o(2),_("matTooltip",r("torrents.copy_to_clipboard"))("cdkCopyToClipboard",s.item(i).id),o(),y(s.item(i).id),o(2),_("matTooltip",r("torrents.copy_to_clipboard"))("cdkCopyToClipboard",s.item(i).payload),o(),m("",r("dashboard.queues.payload"),":"),o(2),y(s.beautifyPayload(s.item(i).payload)),o(),S((e=s.item(i).error)?13:-1,e)}}function Ze(t,n){t&1&&w(0,"tr",25)}function et(t,n){if(t&1&&w(0,"tr",26),t&2){let e=n.$implicit,i=a(2);O("summary-row "+(e.id===i.expandedId.getValue()?"expanded":"collapsed"))}}function tt(t,n){if(t&1&&w(0,"tr",26),t&2){let e=n.$implicit,i=a(2);O("expanded-detail-row "+(e.id===i.expandedId.getValue()?"expanded":"collapsed"))}}function it(t,n){if(t&1&&(C(0),l(1,"div",1),w(2,"mat-progress-bar",2),h(3,"async"),p(),l(4,"table",3),C(5,4),d(6,ke,2,1,"th",5)(7,Oe,2,1,"td",6),f(),C(8,7),d(9,Ae,2,1,"th",5)(10,Le,2,1,"td",6),f(),C(11,8),d(12,ze,2,1,"th",5)(13,Be,3,3,"td",6),f(),C(14,9),d(15,Fe,2,1,"th",5)(16,Re,2,1,"td",6),f(),C(17,10),d(18,qe,2,1,"th",5)(19,Ne,2,1,"td",6),f(),C(20,11),d(21,je,2,1,"th",12)(22,Ge,3,3,"td",6),f(),C(23,13),d(24,Ke,2,1,"th",12)(25,We,2,1,"td",6),f(),C(26,14),d(27,Ye,14,11,"td",15),f(),d(28,Ze,1,0,"tr",16)(29,et,1,2,"tr",17)(30,tt,1,2,"tr",17),p(),f()),t&2){let e=a();o(2),_("mode",T(3,7,e.dataSource.loading$)?"indeterminate":"determinate")("value",0),o(2),_("dataSource",e.dataSource)("multiTemplateDataRows",!0),o(24),_("matHeaderRowDef",e.displayedColumns),o(),_("matRowDefColumns",e.displayedColumns),o(),_("matRowDefColumns",j(9,$e))}}var Dt=(()=>{class t{constructor(){this.transloco=P(V),this.displayedColumns=nt,this.updated=new E,this.expandedId=new z(null),this.items=Array()}ngOnInit(){this.dataSource.items$.subscribe(e=>{if(this.items=e,e.length){let i=this.expandedId.getValue();i&&!e.some(({id:r})=>r===i)&&this.expandedId.next(null)}})}isAllSelected(){return this.items.every(e=>this.selection.isSelected(e.id))}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.items.map(e=>e.id))}toggleQueueJobId(e){this.expandedId.getValue()===e?this.expandedId.next(null):this.expandedId.next(e)}item(e){return e}beautifyPayload(e){try{return JSON.stringify(JSON.parse(e),null,2)}catch{return e}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["app-queue-jobs-table"]],inputs:{dataSource:"dataSource",selection:"selection",displayedColumns:"displayedColumns"},outputs:{updated:"updated"},standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],[1,"progress-bar-container"],[3,"mode","value"],["mat-table","",1,"table-results",3,"dataSource","multiTemplateDataRows"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","queue"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","error"],["matColumnDef","createdAt"],["mat-header-cell","","style","text-align: center",4,"matHeaderCellDef"],["matColumnDef","ranAt"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-header-cell","",2,"text-align","center"],["mat-cell",""],[1,"item-detail"],[1,"copy",3,"matTooltip","cdkCopyToClipboard"],[1,"payload"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&d(0,it,31,10,"ng-container",0)},dependencies:[k,oe,ce,me,_e,Ce,ue,de,fe,ge,xe,he,be,$,D,X,Y,Q,Se],styles:[".item-detail[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding-top:20px}.item-detail[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-bottom:20px}tr[_ngcontent-%COMP%]:not(.expanded-detail-row)   td[_ngcontent-%COMP%]{cursor:pointer}tr.expanded-detail-row[_ngcontent-%COMP%]{height:0}tr.expanded-detail-row[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding-top:8px}tr.expanded-detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-top:8px;padding-bottom:4px}tr.expanded-detail-row[_ngcontent-%COMP%]   span.copy[_ngcontent-%COMP%]{cursor:crosshair;text-decoration:underline;text-decoration-style:dotted}pre[_ngcontent-%COMP%]{opacity:0;max-height:200px;max-width:100px;overflow:scroll;background:#7773;padding:10px}.expanded-detail-row.expanded[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{opacity:1;max-width:1200px}"],data:{animation:[Z("detailExpand",[L("collapsed,void",A({height:"0px",minHeight:"0"})),L("expanded",A({height:"*"})),te("expanded <=> collapsed",ee("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}}return t})(),nt=["id","queue","priority","status","error","createdAt","ranAt"];export{Se as a,ut as b,Dt as c};
