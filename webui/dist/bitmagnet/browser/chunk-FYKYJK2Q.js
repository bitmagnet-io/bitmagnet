import{k as ae}from"./chunk-QPOWPIPD.js";import{A as re,Aa as he,B as le,Ba as be,Ua as k,a as Q,b as D,fa as pe,ka as ce,n as ie,na as $,oa as se,r as ne,sa as me,ta as de,ua as _e,va as ue,wa as ge,xa as xe,ya as Ce,z as oe,za as fe}from"./chunk-FRQ6MKZA.js";import{c as Z,d as ee,g as L,h as z,i as te}from"./chunk-JGYM447R.js";import{Db as d,Ea as u,Eb as R,Fa as g,Fb as _,Fc as J,Ib as O,Kb as S,Lb as q,Mb as H,Nb as N,Oa as E,Ob as l,Pb as c,Qb as w,Rb as C,Sb as f,Ub as b,Vc as X,Wc as V,Xb as x,Xc as Y,Zb as o,gc as s,hc as y,ib as r,ic as m,l as A,lc as M,mc as j,nc as G,oc as K,pc as U,qa as P,qc as h,rc as T,sc as W,ua as I,xa as B,zb as F}from"./chunk-IDBLIDSQ.js";var Pe=(e,n,t)=>({x:e,y:n,z:t}),Ie=(e,n)=>({x:e,y:n}),Ee=e=>[null,e];function Me(e,n){if(e&1&&(l(0,"mat-option",4),s(1),c()),e&2){let t=n.$implicit;_("value",t),r(),m(" ",t," ")}}function Je(e,n){if(e&1&&(s(0),h(1,"number"),h(2,"number"),h(3,"number")),e&2){let t=o().$implicit,i=o();m(" ",t("paginator.x_to_y_of_z",U(7,Pe,T(1,1,i.firstItemIndex),T(2,3,i.lastItemIndex),T(3,5,i.totalLength)))," ")}}function Ve(e,n){if(e&1&&(s(0),h(1,"number"),h(2,"number")),e&2){let t=o().$implicit,i=o();m(" ",t("paginator.x_to_y",K(5,Ie,T(1,1,i.firstItemIndex),T(2,3,i.lastItemIndex)))," ")}}function Qe(e,n){if(e&1){let t=b();l(0,"button",7),x("click",function(){let a;u(t);let p=o(2);return p.page=(a=p.pageCount)!==null&&a!==void 0?a:1,g(p.emitChange())}),l(1,"mat-icon"),s(2,"last_page"),c()()}if(e&2){let t=o().$implicit,i=o();_("disabled",G(2,Ee,i.page).includes(i.pageCount))("matTooltip",t("paginator.last_page"))}}function De(e,n){if(e&1){let t=b();C(0),l(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),s(4,"Items per page"),c(),l(5,"mat-select",3),x("valueChange",function(a){u(t);let p=o();return p.pageSize=a,p.page=1,g(p.emitChange())}),H(6,Me,2,2,"mat-option",4,q),c()(),l(8,"p",5),d(9,Je,4,11)(10,Ve,3,8),c(),l(11,"div",6)(12,"button",7),x("click",function(){u(t);let a=o();return a.page=1,g(a.emitChange())}),l(13,"mat-icon"),s(14,"first_page"),c()(),l(15,"button",7),x("click",function(){u(t);let a=o();return a.page=a.page-1,g(a.emitChange())}),l(16,"mat-icon"),s(17,"navigate_before"),c()(),l(18,"button",7),x("click",function(){u(t);let a=o();return a.page=a.page+1,g(a.emitChange())}),l(19,"mat-icon"),s(20,"navigate_next"),c()(),d(21,Qe,3,4,"button",8),c()(),f()}if(e&2){let t=n.$implicit,i=o();r(5),_("value",i.pageSize),r(),N(i.pageSizes),r(3),S(i.hasTotalLength?9:10),r(3),_("disabled",!i.hasPreviousPage)("matTooltip",t("paginator.first_page")),r(3),_("disabled",!i.hasPreviousPage)("matTooltip",t("paginator.previous_page")),r(3),_("disabled",!i.actuallyHasNextPage)("matTooltip",t("paginator.next_page")),r(3),S(i.showLastPage?21:-1)}}var ut=(()=>{let n=class n{constructor(){this.page=1,this.pageSize=10,this.pageSizes=[10,20,50,100],this.pageLength=0,this.totalLength=null,this.totalIsEstimate=!1,this.hasNextPage=null,this.showLastPage=!1,this.paging=new E}get firstItemIndex(){return(this.page-1)*this.pageSize+1}get lastItemIndex(){return(this.page-1)*this.pageSize+this.pageLength}get hasTotalLength(){return typeof this.totalLength=="number"}get hasPreviousPage(){return this.page>1}get pageCount(){return typeof this.totalLength!="number"?null:Math.ceil(this.totalLength/this.pageSize)}get actuallyHasNextPage(){return typeof this.hasNextPage=="boolean"?this.hasNextPage:typeof this.totalLength!="number"?!1:this.page*this.pageSize<this.totalLength}emitChange(){this.paging.emit({page:this.page,pageSize:this.pageSize})}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=I({type:n,selectors:[["app-paginator"]],inputs:{page:[2,"page","page",J],pageSize:[2,"pageSize","pageSize",J],pageSizes:"pageSizes",pageLength:[2,"pageLength","pageLength",J],totalLength:"totalLength",totalIsEstimate:"totalIsEstimate",hasNextPage:"hasNextPage",showLastPage:"showLastPage"},outputs:{paging:"paging"},standalone:!0,features:[F,M],decls:1,vars:0,consts:[[4,"transloco"],[1,"paginator"],["subscriptSizing","dynamic",1,"field-items-per-page"],[3,"valueChange","value"],[3,"value"],[1,"paginator-description"],[1,"paginator-navigation"],["mat-icon-button","",3,"click","disabled","matTooltip"],["mat-icon-button","",3,"disabled","matTooltip"]],template:function(a,p){a&1&&d(0,De,22,9,"ng-container",0)},dependencies:[k,ie,ne,le,re,pe,se,$,D,V],styles:[".paginator[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.paginator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 20px}.paginator[_ngcontent-%COMP%]   .field-items-per-page[_ngcontent-%COMP%]{width:140px}"]});let e=n;return e})();var Se=(()=>{let n=class n{constructor(){this.transloco=P(Q)}transform(i){return ae(i,this.transloco.getActiveLang())}};n.\u0275fac=function(a){return new(a||n)},n.\u0275pipe=B({name:"timeAgo",type:n,pure:!1,standalone:!0});let e=n;return e})();var $e=()=>["expandedDetail"];function ke(e,n){if(e&1&&(l(0,"th",18),s(1),c()),e&2){let t=o().$implicit;r(),y(t("general.id"))}}function Oe(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),s(1),c()}if(e&2){let t=n.$implicit,i=o(2);r(),m(" ",i.item(t).id," ")}}function Le(e,n){if(e&1&&(l(0,"th",18),s(1),c()),e&2){let t=o().$implicit;r(),m(" ",t("dashboard.queues.queue")," ")}}function ze(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),s(1),c()}if(e&2){let t=n.$implicit,i=o(2);r(),m(" ",i.item(t).queue," ")}}function Ae(e,n){if(e&1&&(l(0,"th",18),s(1),c()),e&2){let t=o().$implicit;r(),m(" ",t("dashboard.queues.priority")," ")}}function Be(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),s(1),h(2,"number"),c()}if(e&2){let t=n.$implicit,i=o(2);r(),m(" ",T(2,1,i.item(t).priority)," ")}}function Fe(e,n){if(e&1&&(l(0,"th",18),s(1),c()),e&2){let t=o().$implicit;r(),m(" ",t("dashboard.queues.status")," ")}}function Re(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),s(1),c()}if(e&2){let t=n.$implicit,i=o(2);r(),m(" ",i.item(t).status," ")}}function qe(e,n){if(e&1&&(l(0,"th",18),s(1),c()),e&2){let t=o().$implicit;r(),y(t("general.error"))}}function He(e,n){if(e&1&&(s(0),h(1,"slice")),e&2){let t=o().$implicit,i=o(2);m(" ",W(1,1,i.item(t).error,0,20)+"..."," ")}}function Ne(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),d(1,He,2,5),c()}if(e&2){let t=n.$implicit;r(),S(t.error?1:-1)}}function je(e,n){if(e&1&&(l(0,"th",20),s(1),c()),e&2){let t=o().$implicit;r(),m(" ",t("dashboard.queues.created_at")," ")}}function Ge(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),s(1),h(2,"timeAgo"),c()}if(e&2){let t=n.$implicit,i=o(2);r(),m(" ",T(2,1,i.item(t).createdAt)," ")}}function Ke(e,n){if(e&1&&(l(0,"th",20),s(1),c()),e&2){let t=o().$implicit;r(),m(" ",t("dashboard.queues.ran_at")," ")}}function Ue(e,n){e&1&&(s(0),h(1,"timeAgo")),e&2&&m(" ",T(1,1,n)," ")}function We(e,n){if(e&1){let t=b();l(0,"td",19),x("click",function(a){let p=u(t).$implicit;return o(2).toggleQueueJobId(p.id),g(a.stopPropagation())}),d(1,Ue,2,3),c()}if(e&2){let t,i=n.$implicit;r(),S((t=i.ranAt)?1:-1,t)}}function Xe(e,n){if(e&1&&(l(0,"h5")(1,"span",23),s(2),c()(),l(3,"pre",24),s(4),c()),e&2){let t=n,i=o(2).$implicit;r(),_("matTooltip",i("torrents.copy_to_clipboard"))("cdkCopyToClipboard",t),r(),m("",i("general.error"),":"),r(2),y(t)}}function Ye(e,n){if(e&1&&(l(0,"td",21)(1,"div",22)(2,"p")(3,"strong"),s(4),c(),s(5,"\xA0"),l(6,"span",23),s(7),c()(),l(8,"h5")(9,"span",23),s(10),c()(),l(11,"pre",24),s(12),c(),d(13,Xe,5,4),c()()),e&2){let t,i=n.$implicit,a=o().$implicit,p=o();R("colspan",p.displayedColumns.length),r(),_("@detailExpand",p.expandedId.getValue()===i.id?"expanded":"collapsed"),r(3),m("",a("general.id"),":"),r(2),_("matTooltip",a("torrents.copy_to_clipboard"))("cdkCopyToClipboard",p.item(i).id),r(),y(p.item(i).id),r(2),_("matTooltip",a("torrents.copy_to_clipboard"))("cdkCopyToClipboard",p.item(i).payload),r(),m("",a("dashboard.queues.payload"),":"),r(2),y(p.beautifyPayload(p.item(i).payload)),r(),S((t=p.item(i).error)?13:-1,t)}}function Ze(e,n){e&1&&w(0,"tr",25)}function et(e,n){if(e&1&&w(0,"tr",26),e&2){let t=n.$implicit,i=o(2);O("summary-row "+(t.id===i.expandedId.getValue()?"expanded":"collapsed"))}}function tt(e,n){if(e&1&&w(0,"tr",26),e&2){let t=n.$implicit,i=o(2);O("expanded-detail-row "+(t.id===i.expandedId.getValue()?"expanded":"collapsed"))}}function it(e,n){if(e&1&&(C(0),l(1,"div",1),w(2,"mat-progress-bar",2),h(3,"async"),c(),l(4,"table",3),C(5,4),d(6,ke,2,1,"th",5)(7,Oe,2,1,"td",6),f(),C(8,7),d(9,Le,2,1,"th",5)(10,ze,2,1,"td",6),f(),C(11,8),d(12,Ae,2,1,"th",5)(13,Be,3,3,"td",6),f(),C(14,9),d(15,Fe,2,1,"th",5)(16,Re,2,1,"td",6),f(),C(17,10),d(18,qe,2,1,"th",5)(19,Ne,2,1,"td",6),f(),C(20,11),d(21,je,2,1,"th",12)(22,Ge,3,3,"td",6),f(),C(23,13),d(24,Ke,2,1,"th",12)(25,We,2,1,"td",6),f(),C(26,14),d(27,Ye,14,11,"td",15),f(),d(28,Ze,1,0,"tr",16)(29,et,1,2,"tr",17)(30,tt,1,2,"tr",17),c(),f()),e&2){let t=o();r(2),_("mode",T(3,7,t.dataSource.loading$)?"indeterminate":"determinate")("value",0),r(2),_("dataSource",t.dataSource)("multiTemplateDataRows",!0),r(24),_("matHeaderRowDef",t.displayedColumns),r(),_("matRowDefColumns",t.displayedColumns),r(),_("matRowDefColumns",j(9,$e))}}var Dt=(()=>{let n=class n{constructor(){this.transloco=P(Q),this.displayedColumns=nt,this.updated=new E,this.expandedId=new A(null),this.items=Array()}ngOnInit(){this.dataSource.items$.subscribe(i=>{if(this.items=i,i.length){let a=this.expandedId.getValue();a&&!i.some(({id:p})=>p===a)&&this.expandedId.next(null)}})}isAllSelected(){return this.items.every(i=>this.selection.isSelected(i.id))}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.items.map(i=>i.id))}toggleQueueJobId(i){this.expandedId.getValue()===i?this.expandedId.next(null):this.expandedId.next(i)}item(i){return i}beautifyPayload(i){try{return JSON.stringify(JSON.parse(i),null,2)}catch{return i}}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=I({type:n,selectors:[["app-queue-jobs-table"]],inputs:{dataSource:"dataSource",selection:"selection",displayedColumns:"displayedColumns"},outputs:{updated:"updated"},standalone:!0,features:[M],decls:1,vars:0,consts:[[4,"transloco"],[1,"progress-bar-container"],[3,"mode","value"],["mat-table","",1,"table-results",3,"dataSource","multiTemplateDataRows"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","queue"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","error"],["matColumnDef","createdAt"],["mat-header-cell","","style","text-align: center",4,"matHeaderCellDef"],["matColumnDef","ranAt"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-header-cell","",2,"text-align","center"],["mat-cell",""],[1,"item-detail"],[1,"copy",3,"matTooltip","cdkCopyToClipboard"],[1,"payload"],["mat-header-row",""],["mat-row",""]],template:function(a,p){a&1&&d(0,it,31,10,"ng-container",0)},dependencies:[k,oe,ce,me,_e,Ce,ue,de,fe,ge,xe,he,be,$,D,X,Y,V,Se],styles:[".item-detail[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding-top:20px}.item-detail[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-bottom:20px}tr[_ngcontent-%COMP%]:not(.expanded-detail-row)   td[_ngcontent-%COMP%]{cursor:pointer}tr.expanded-detail-row[_ngcontent-%COMP%]{height:0}tr.expanded-detail-row[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding-top:8px}tr.expanded-detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-top:8px;padding-bottom:4px}tr.expanded-detail-row[_ngcontent-%COMP%]   span.copy[_ngcontent-%COMP%]{cursor:crosshair;text-decoration:underline;text-decoration-style:dotted}pre[_ngcontent-%COMP%]{opacity:0;max-height:200px;max-width:100px;overflow:scroll;background:#7773;padding:10px}.expanded-detail-row.expanded[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{opacity:1;max-width:1200px}"],data:{animation:[Z("detailExpand",[z("collapsed,void",L({height:"0px",minHeight:"0"})),z("expanded",L({height:"*"})),te("expanded <=> collapsed",ee("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}});let e=n;return e})(),nt=["id","queue","priority","status","error","createdAt","ranAt"];export{Se as a,ut as b,Dt as c};
